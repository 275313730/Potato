/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./dev/main.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./dev/main.js":
/*!*********************!*\
  !*** ./dev/main.js ***!
  \*********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _src_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../src/index.js */ \"./src/index.js\");\n\r\n\r\n_src_index_js__WEBPACK_IMPORTED_MODULE_0__[\"Game\"].init({ test: true, width: 1920, height: 1080 });\r\n\r\nnew _src_index_js__WEBPACK_IMPORTED_MODULE_0__[\"Stage\"]({\r\n  created() {\r\n    new _src_index_js__WEBPACK_IMPORTED_MODULE_0__[\"Sprite\"]({\r\n      config: {\r\n        id: \"test\"\r\n      },\r\n      created() {\r\n        this.input.watch(\"mousedown\", mouse => {\r\n          console.log(mouse.x, mouse.y)\r\n        })\r\n      }\r\n    })\r\n  }\r\n})//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9kZXYvbWFpbi5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2Rldi9tYWluLmpzP2IzNmIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgR2FtZSwgU3RhZ2UsIFNwcml0ZSB9IGZyb20gXCIuLi9zcmMvaW5kZXguanNcIjtcclxuXHJcbkdhbWUuaW5pdCh7IHRlc3Q6IHRydWUsIHdpZHRoOiAxOTIwLCBoZWlnaHQ6IDEwODAgfSk7XHJcblxyXG5uZXcgU3RhZ2Uoe1xyXG4gIGNyZWF0ZWQoKSB7XHJcbiAgICBuZXcgU3ByaXRlKHtcclxuICAgICAgY29uZmlnOiB7XHJcbiAgICAgICAgaWQ6IFwidGVzdFwiXHJcbiAgICAgIH0sXHJcbiAgICAgIGNyZWF0ZWQoKSB7XHJcbiAgICAgICAgdGhpcy5pbnB1dC53YXRjaChcIm1vdXNlZG93blwiLCBtb3VzZSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhtb3VzZS54LCBtb3VzZS55KVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfVxyXG59KSJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./dev/main.js\n");

/***/ }),

/***/ "./src/Common/Event.js":
/*!*****************************!*\
  !*** ./src/Common/Event.js ***!
  \*****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return event; });\n/**\r\n * 通用事件系统\r\n * @param {Object} obj Game/Stage/Sprite对象 \r\n */\r\nfunction event(obj) {\r\n  let events = {};\r\n\r\n  return {\r\n    /**\r\n     * 添加事件\r\n     * @param {string} name \r\n     * @param {Function} fn \r\n     */\r\n    add(name, fn) {\r\n      // 判断事件是否存在\r\n      if (events[name]) return;\r\n      // 添加事件\r\n      events[name] = { fn, status: true };\r\n    },\r\n    /**\r\n     * 删除事件\r\n     * @param {string} name \r\n     */\r\n    del(name) {\r\n      // 判断事件是否存在\r\n      if (!events[name]) return;\r\n      // 删除事件\r\n      delete events[name];\r\n    },\r\n    /**\r\n     * 启用事件\r\n     * @param {string} name \r\n     */\r\n    enable(name) {\r\n      const event = events[name]\r\n      // 判断事件是否存在\r\n      if (!event) return;\r\n      // 启用事件\r\n      event.status = true;\r\n    },\r\n    /**\r\n     * 禁用事件\r\n     * @param {string} name \r\n     */\r\n    disable(name) {\r\n      const event = events[name]\r\n      // 判断事件是否存在\r\n      if (!event) return;\r\n      // 启用事件\r\n      event.status = false;\r\n    },\r\n    /**\r\n     * 删除所有事件\r\n     */\r\n    clear() {\r\n      events = {};\r\n    },\r\n    /**\r\n     * 执行事件\r\n     */\r\n    execute() {\r\n      for (const key in events) {\r\n        const event = events[key];\r\n        // 检查事件是否被禁用\r\n        event.status && event.fn.call(obj);\r\n      }\r\n    }\r\n  }\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvQ29tbW9uL0V2ZW50LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL0NvbW1vbi9FdmVudC5qcz9iZTczIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiDpgJrnlKjkuovku7bns7vnu59cclxuICogQHBhcmFtIHtPYmplY3R9IG9iaiBHYW1lL1N0YWdlL1Nwcml0ZeWvueixoSBcclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGV2ZW50KG9iaikge1xyXG4gIGxldCBldmVudHMgPSB7fTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIC8qKlxyXG4gICAgICog5re75Yqg5LqL5Lu2XHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBcclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFxyXG4gICAgICovXHJcbiAgICBhZGQobmFtZSwgZm4pIHtcclxuICAgICAgLy8g5Yik5pat5LqL5Lu25piv5ZCm5a2Y5ZyoXHJcbiAgICAgIGlmIChldmVudHNbbmFtZV0pIHJldHVybjtcclxuICAgICAgLy8g5re75Yqg5LqL5Lu2XHJcbiAgICAgIGV2ZW50c1tuYW1lXSA9IHsgZm4sIHN0YXR1czogdHJ1ZSB9O1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICog5Yig6Zmk5LqL5Lu2XHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBcclxuICAgICAqL1xyXG4gICAgZGVsKG5hbWUpIHtcclxuICAgICAgLy8g5Yik5pat5LqL5Lu25piv5ZCm5a2Y5ZyoXHJcbiAgICAgIGlmICghZXZlbnRzW25hbWVdKSByZXR1cm47XHJcbiAgICAgIC8vIOWIoOmZpOS6i+S7tlxyXG4gICAgICBkZWxldGUgZXZlbnRzW25hbWVdO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICog5ZCv55So5LqL5Lu2XHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBcclxuICAgICAqL1xyXG4gICAgZW5hYmxlKG5hbWUpIHtcclxuICAgICAgY29uc3QgZXZlbnQgPSBldmVudHNbbmFtZV1cclxuICAgICAgLy8g5Yik5pat5LqL5Lu25piv5ZCm5a2Y5ZyoXHJcbiAgICAgIGlmICghZXZlbnQpIHJldHVybjtcclxuICAgICAgLy8g5ZCv55So5LqL5Lu2XHJcbiAgICAgIGV2ZW50LnN0YXR1cyA9IHRydWU7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiDnpoHnlKjkuovku7ZcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFxyXG4gICAgICovXHJcbiAgICBkaXNhYmxlKG5hbWUpIHtcclxuICAgICAgY29uc3QgZXZlbnQgPSBldmVudHNbbmFtZV1cclxuICAgICAgLy8g5Yik5pat5LqL5Lu25piv5ZCm5a2Y5ZyoXHJcbiAgICAgIGlmICghZXZlbnQpIHJldHVybjtcclxuICAgICAgLy8g5ZCv55So5LqL5Lu2XHJcbiAgICAgIGV2ZW50LnN0YXR1cyA9IGZhbHNlO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICog5Yig6Zmk5omA5pyJ5LqL5Lu2XHJcbiAgICAgKi9cclxuICAgIGNsZWFyKCkge1xyXG4gICAgICBldmVudHMgPSB7fTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIOaJp+ihjOS6i+S7tlxyXG4gICAgICovXHJcbiAgICBleGVjdXRlKCkge1xyXG4gICAgICBmb3IgKGNvbnN0IGtleSBpbiBldmVudHMpIHtcclxuICAgICAgICBjb25zdCBldmVudCA9IGV2ZW50c1trZXldO1xyXG4gICAgICAgIC8vIOajgOafpeS6i+S7tuaYr+WQpuiiq+emgeeUqFxyXG4gICAgICAgIGV2ZW50LnN0YXR1cyAmJiBldmVudC5mbi5jYWxsKG9iaik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn0iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/Common/Event.js\n");

/***/ }),

/***/ "./src/Game/Asset.js":
/*!***************************!*\
  !*** ./src/Game/Asset.js ***!
  \***************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return asset; });\n/**\r\n * 资源系统，用于操作图像音频等资源\r\n */\r\nfunction asset() {\r\n  // 图片路径\r\n  let publicPath = \"\";\r\n\r\n  // promise集合\r\n  let loadings = [];\r\n  \r\n  // 资源集合\r\n  let assets = {};\r\n\r\n  return {\r\n    /**\r\n     * 判断资源是否加载完成，\r\n     * new Stage()时会自动调用该函数\r\n     * @param {Function} callback 回调函数\r\n     */\r\n    onReady(callback) {\r\n      if (loadings.length > 0) {\r\n        Promise.all(loadings).then(callback);\r\n      } else {\r\n        callback();\r\n      }\r\n    },\r\n    /**\r\n     * 获取资源\r\n     * @param {string} group 资源分组\r\n     * @param {string} name 资源名\r\n     */\r\n    get(group, name) {\r\n      return assets[group][name];\r\n    },\r\n    /**\r\n     * 载入资源\r\n     * @param {Object} options \r\n     */\r\n    load(options) {\r\n      const type = options.type;\r\n      const group = options.group;\r\n      const name = options.name;\r\n      const url = options.url;\r\n\r\n      if (!assets[group]) assets[group] = {};\r\n      if (assets[group][name]) return;\r\n\r\n      if (type === 'image') {\r\n        let image = new Image();\r\n        loadings.push(new Promise(function (resolve) {\r\n          image.onload = function () {\r\n            assets[group][name] = image;\r\n            resolve(true);\r\n          }\r\n        }))\r\n        image.src = publicPath + url;\r\n        return;\r\n      }\r\n\r\n      if (type === 'animation') {\r\n        let image = new Image();\r\n        loadings.push(new Promise(function (resolve) {\r\n          image.onload = function () {\r\n            assets[group][name] = {\r\n              image,\r\n              frame: options.frame,\r\n              interval: options.interval,\r\n              flip: options.flip\r\n            };\r\n            resolve(true);\r\n          }\r\n        }));\r\n        image.src = publicPath + url;\r\n        return;\r\n      }\r\n\r\n      if (type === 'audio') {\r\n        assets[group][name] = new Audio(publicPath + url);\r\n      }\r\n    },\r\n    /**\r\n     * 设置路径\r\n     * @param {string} path \r\n     */\r\n    setPath(path) {\r\n      if (!path) return;\r\n      publicPath = path;\r\n    }\r\n  }\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvR2FtZS9Bc3NldC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9HYW1lL0Fzc2V0LmpzPzdmMzgiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIOi1hOa6kOezu+e7n++8jOeUqOS6juaTjeS9nOWbvuWDj+mfs+mikeetiei1hOa6kFxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYXNzZXQoKSB7XHJcbiAgLy8g5Zu+54mH6Lev5b6EXHJcbiAgbGV0IHB1YmxpY1BhdGggPSBcIlwiO1xyXG5cclxuICAvLyBwcm9taXNl6ZuG5ZCIXHJcbiAgbGV0IGxvYWRpbmdzID0gW107XHJcbiAgXHJcbiAgLy8g6LWE5rqQ6ZuG5ZCIXHJcbiAgbGV0IGFzc2V0cyA9IHt9O1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgLyoqXHJcbiAgICAgKiDliKTmlq3otYTmupDmmK/lkKbliqDovb3lrozmiJDvvIxcclxuICAgICAqIG5ldyBTdGFnZSgp5pe25Lya6Ieq5Yqo6LCD55So6K+l5Ye95pWwXHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayDlm57osIPlh73mlbBcclxuICAgICAqL1xyXG4gICAgb25SZWFkeShjYWxsYmFjaykge1xyXG4gICAgICBpZiAobG9hZGluZ3MubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIFByb21pc2UuYWxsKGxvYWRpbmdzKS50aGVuKGNhbGxiYWNrKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjYWxsYmFjaygpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5botYTmupBcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBncm91cCDotYTmupDliIbnu4RcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIOi1hOa6kOWQjVxyXG4gICAgICovXHJcbiAgICBnZXQoZ3JvdXAsIG5hbWUpIHtcclxuICAgICAgcmV0dXJuIGFzc2V0c1tncm91cF1bbmFtZV07XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiDovb3lhaXotYTmupBcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIFxyXG4gICAgICovXHJcbiAgICBsb2FkKG9wdGlvbnMpIHtcclxuICAgICAgY29uc3QgdHlwZSA9IG9wdGlvbnMudHlwZTtcclxuICAgICAgY29uc3QgZ3JvdXAgPSBvcHRpb25zLmdyb3VwO1xyXG4gICAgICBjb25zdCBuYW1lID0gb3B0aW9ucy5uYW1lO1xyXG4gICAgICBjb25zdCB1cmwgPSBvcHRpb25zLnVybDtcclxuXHJcbiAgICAgIGlmICghYXNzZXRzW2dyb3VwXSkgYXNzZXRzW2dyb3VwXSA9IHt9O1xyXG4gICAgICBpZiAoYXNzZXRzW2dyb3VwXVtuYW1lXSkgcmV0dXJuO1xyXG5cclxuICAgICAgaWYgKHR5cGUgPT09ICdpbWFnZScpIHtcclxuICAgICAgICBsZXQgaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxuICAgICAgICBsb2FkaW5ncy5wdXNoKG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XHJcbiAgICAgICAgICBpbWFnZS5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGFzc2V0c1tncm91cF1bbmFtZV0gPSBpbWFnZTtcclxuICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KSlcclxuICAgICAgICBpbWFnZS5zcmMgPSBwdWJsaWNQYXRoICsgdXJsO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHR5cGUgPT09ICdhbmltYXRpb24nKSB7XHJcbiAgICAgICAgbGV0IGltYWdlID0gbmV3IEltYWdlKCk7XHJcbiAgICAgICAgbG9hZGluZ3MucHVzaChuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xyXG4gICAgICAgICAgaW1hZ2Uub25sb2FkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBhc3NldHNbZ3JvdXBdW25hbWVdID0ge1xyXG4gICAgICAgICAgICAgIGltYWdlLFxyXG4gICAgICAgICAgICAgIGZyYW1lOiBvcHRpb25zLmZyYW1lLFxyXG4gICAgICAgICAgICAgIGludGVydmFsOiBvcHRpb25zLmludGVydmFsLFxyXG4gICAgICAgICAgICAgIGZsaXA6IG9wdGlvbnMuZmxpcFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXNvbHZlKHRydWUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pKTtcclxuICAgICAgICBpbWFnZS5zcmMgPSBwdWJsaWNQYXRoICsgdXJsO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHR5cGUgPT09ICdhdWRpbycpIHtcclxuICAgICAgICBhc3NldHNbZ3JvdXBdW25hbWVdID0gbmV3IEF1ZGlvKHB1YmxpY1BhdGggKyB1cmwpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiDorr7nva7ot6/lvoRcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIFxyXG4gICAgICovXHJcbiAgICBzZXRQYXRoKHBhdGgpIHtcclxuICAgICAgaWYgKCFwYXRoKSByZXR1cm47XHJcbiAgICAgIHB1YmxpY1BhdGggPSBwYXRoO1xyXG4gICAgfVxyXG4gIH1cclxufSJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/Game/Asset.js\n");

/***/ }),

/***/ "./src/Game/Utils.js":
/*!***************************!*\
  !*** ./src/Game/Utils.js ***!
  \***************************/
/*! exports provided: isMobile, initStyle, listenInputEvent, autoResizeCanvas */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isMobile\", function() { return isMobile; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"initStyle\", function() { return initStyle; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"listenInputEvent\", function() { return listenInputEvent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"autoResizeCanvas\", function() { return autoResizeCanvas; });\n/**\r\n * 检测是否为移动端\r\n */\r\nfunction isMobile() {\r\n  const inBrowser = typeof window !== \"undefined\";\r\n  const UA = inBrowser && window.navigator.userAgent.toLowerCase();\r\n  const isAndroid = (UA && UA.indexOf(\"android\") > 0);\r\n  const isIOS = (UA && /iphone|ipad|ipod|ios/.test(UA));\r\n  if (isAndroid || isIOS) {\r\n    return true;\r\n  } else {\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * 初始化页面样式\r\n */\r\nfunction initStyle() {\r\n  let body = document.body;\r\n  body.style.margin = 0;\r\n  body.style.padding = 0;\r\n  body.style.width = \"100vw\";\r\n  body.style.height = \"100vh\";\r\n  body.style.overflow = \"hidden\";\r\n  body.style.display = \"flex\";\r\n  body.style.alignItems = \"center\";\r\n  body.style.justifyContent = \"center\";\r\n}\r\n\r\n/**\r\n * 监听用户事件\r\n * @param {Object} Game 游戏对象\r\n */\r\nfunction listenInputEvent(Game) {\r\n\r\n  // 触屏事件\r\n  if (Game.isMobile) {\r\n    [\"touchstart\", \"touchmove\", \"touchend\"].forEach(function (eventType) {\r\n      Game.canvas.addEventListener(eventType, function (e) {\r\n        executeInputEvents(eventType, calTouch(e));\r\n      });\r\n    });\r\n  } else {\r\n    // 鼠标事件\r\n    [\"mousedown\", \"mouseup\"].forEach(function (eventType) {\r\n      Game.canvas.addEventListener(eventType, function (e) {\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        executeInputEvents(eventType, calMouse(e));\r\n      });\r\n    });\r\n    // 键盘事件\r\n    window.addEventListener(\"keydown\", function (e) {\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n      const keyCode = e.keyCode;\r\n      // F11默认为全屏键，无法修改\r\n      if (keyCode === 122) return fullScreen();\r\n      if (Game.keyCode === keyCode) return;\r\n      Game.keyCode = keyCode;\r\n      executeInputEvents(\"keydown\", keyCode);\r\n    });\r\n    window.addEventListener(\"keyup\", function (e) {\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n      const keyCode = e.keyCode;\r\n      if (Game.keyCode === keyCode) {\r\n        Game.keyCode = null;\r\n      }\r\n      executeInputEvents(\"keyup\", keyCode);\r\n    });\r\n  }\r\n\r\n  /**\r\n    * 执行用户事件\r\n    * @param {string} eventType 事件类型\r\n    * @param {Number} keycode 键盘码\r\n    */\r\n  function executeInputEvents(eventType, keycode) {\r\n    let events = Game.inputEvents;\r\n    for (const key in events) {\r\n      let event = events[key];\r\n      if (!event[eventType]) continue;\r\n      event[eventType](keycode);\r\n    }\r\n  }\r\n\r\n  /**\r\n    * 计算鼠标数据\r\n    * @param {Object} e 鼠标数据\r\n    */\r\n  function calMouse(e) {\r\n    const canvas = Game.canvas;\r\n    // 计算画面缩放比例\r\n    const scale = Game.scale;\r\n    // 简化事件属性\r\n    return {\r\n      x: (e.clientX - canvas.offsetLeft) / scale,\r\n      y: (e.clientY - canvas.offsetTop) / scale,\r\n      button: e.button\r\n    };\r\n  }\r\n\r\n  /**\r\n   * 计算触控数据\r\n   * @param {Object} e 触控数据\r\n   */\r\n  function calTouch(e) {\r\n    const canvas = Game.canvas;\r\n    const scale = Game.scale;\r\n    let touches = [];\r\n    for (let i = 0; i < e.targetTouches.length; i++) {\r\n      const touch = e.targetTouches[i];\r\n      touches.push({\r\n        x: (touch.clientX - canvas.offsetLeft) / scale,\r\n        y: (touch.clientY - canvas.offsetTop) / scale,\r\n        id: touch.identifier,\r\n        type: e.type\r\n      });\r\n    }\r\n    return touches;\r\n  }\r\n}\r\n\r\n/**\r\n * 实现全屏\r\n */\r\nfunction fullScreen() {\r\n  var el = document.documentElement;\r\n  var rfs = el.requestFullScreen ||\r\n    el.webkitRequestFullScreen ||\r\n    el.mozRequestFullScreen ||\r\n    el.msRequestFullscreen;\r\n  if (typeof rfs != \"undefined\" && rfs) {\r\n    rfs.call(el);\r\n  };\r\n}\r\n\r\n/**\r\n * 自适应画布\r\n * @param {Object} Game 游戏对象\r\n */\r\nfunction autoResizeCanvas(Game) {\r\n  window.onresize = window.onload = function () {\r\n    const ratio = Game.ratio;\r\n    let width = document.body.clientWidth;\r\n    let height = document.body.clientHeight;\r\n    if (width / height > ratio) {\r\n      Game.viewHeight = height;\r\n      Game.viewWidth = ratio * height;\r\n    } else {\r\n      Game.viewWidth = width;\r\n      Game.viewHeight = width / ratio;\r\n    }\r\n    Game.scale = Game.viewHeight / Game.height;\r\n    // 设置canvas宽高\r\n    Game.canvas.setAttribute(\"width\", Game.viewWidth);\r\n    Game.canvas.setAttribute(\"height\", Game.viewHeight);\r\n  }\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvR2FtZS9VdGlscy5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9HYW1lL1V0aWxzLmpzPzJkOTkiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIOajgOa1i+aYr+WQpuS4uuenu+WKqOerr1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGlzTW9iaWxlKCkge1xyXG4gIGNvbnN0IGluQnJvd3NlciA9IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCI7XHJcbiAgY29uc3QgVUEgPSBpbkJyb3dzZXIgJiYgd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTtcclxuICBjb25zdCBpc0FuZHJvaWQgPSAoVUEgJiYgVUEuaW5kZXhPZihcImFuZHJvaWRcIikgPiAwKTtcclxuICBjb25zdCBpc0lPUyA9IChVQSAmJiAvaXBob25lfGlwYWR8aXBvZHxpb3MvLnRlc3QoVUEpKTtcclxuICBpZiAoaXNBbmRyb2lkIHx8IGlzSU9TKSB7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIOWIneWni+WMlumhtemdouagt+W8j1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGluaXRTdHlsZSgpIHtcclxuICBsZXQgYm9keSA9IGRvY3VtZW50LmJvZHk7XHJcbiAgYm9keS5zdHlsZS5tYXJnaW4gPSAwO1xyXG4gIGJvZHkuc3R5bGUucGFkZGluZyA9IDA7XHJcbiAgYm9keS5zdHlsZS53aWR0aCA9IFwiMTAwdndcIjtcclxuICBib2R5LnN0eWxlLmhlaWdodCA9IFwiMTAwdmhcIjtcclxuICBib2R5LnN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcclxuICBib2R5LnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcclxuICBib2R5LnN0eWxlLmFsaWduSXRlbXMgPSBcImNlbnRlclwiO1xyXG4gIGJvZHkuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSBcImNlbnRlclwiO1xyXG59XHJcblxyXG4vKipcclxuICog55uR5ZCs55So5oi35LqL5Lu2XHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBHYW1lIOa4uOaIj+WvueixoVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGxpc3RlbklucHV0RXZlbnQoR2FtZSkge1xyXG5cclxuICAvLyDop6blsY/kuovku7ZcclxuICBpZiAoR2FtZS5pc01vYmlsZSkge1xyXG4gICAgW1widG91Y2hzdGFydFwiLCBcInRvdWNobW92ZVwiLCBcInRvdWNoZW5kXCJdLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50VHlwZSkge1xyXG4gICAgICBHYW1lLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBleGVjdXRlSW5wdXRFdmVudHMoZXZlbnRUeXBlLCBjYWxUb3VjaChlKSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIC8vIOm8oOagh+S6i+S7tlxyXG4gICAgW1wibW91c2Vkb3duXCIsIFwibW91c2V1cFwiXS5mb3JFYWNoKGZ1bmN0aW9uIChldmVudFR5cGUpIHtcclxuICAgICAgR2FtZS5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgZXhlY3V0ZUlucHV0RXZlbnRzKGV2ZW50VHlwZSwgY2FsTW91c2UoZSkpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgLy8g6ZSu55uY5LqL5Lu2XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBjb25zdCBrZXlDb2RlID0gZS5rZXlDb2RlO1xyXG4gICAgICAvLyBGMTHpu5jorqTkuLrlhajlsY/plK7vvIzml6Dms5Xkv67mlLlcclxuICAgICAgaWYgKGtleUNvZGUgPT09IDEyMikgcmV0dXJuIGZ1bGxTY3JlZW4oKTtcclxuICAgICAgaWYgKEdhbWUua2V5Q29kZSA9PT0ga2V5Q29kZSkgcmV0dXJuO1xyXG4gICAgICBHYW1lLmtleUNvZGUgPSBrZXlDb2RlO1xyXG4gICAgICBleGVjdXRlSW5wdXRFdmVudHMoXCJrZXlkb3duXCIsIGtleUNvZGUpO1xyXG4gICAgfSk7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgY29uc3Qga2V5Q29kZSA9IGUua2V5Q29kZTtcclxuICAgICAgaWYgKEdhbWUua2V5Q29kZSA9PT0ga2V5Q29kZSkge1xyXG4gICAgICAgIEdhbWUua2V5Q29kZSA9IG51bGw7XHJcbiAgICAgIH1cclxuICAgICAgZXhlY3V0ZUlucHV0RXZlbnRzKFwia2V5dXBcIiwga2V5Q29kZSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAgKiDmiafooYznlKjmiLfkuovku7ZcclxuICAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50VHlwZSDkuovku7bnsbvlnotcclxuICAgICogQHBhcmFtIHtOdW1iZXJ9IGtleWNvZGUg6ZSu55uY56CBXHJcbiAgICAqL1xyXG4gIGZ1bmN0aW9uIGV4ZWN1dGVJbnB1dEV2ZW50cyhldmVudFR5cGUsIGtleWNvZGUpIHtcclxuICAgIGxldCBldmVudHMgPSBHYW1lLmlucHV0RXZlbnRzO1xyXG4gICAgZm9yIChjb25zdCBrZXkgaW4gZXZlbnRzKSB7XHJcbiAgICAgIGxldCBldmVudCA9IGV2ZW50c1trZXldO1xyXG4gICAgICBpZiAoIWV2ZW50W2V2ZW50VHlwZV0pIGNvbnRpbnVlO1xyXG4gICAgICBldmVudFtldmVudFR5cGVdKGtleWNvZGUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICAqIOiuoeeul+m8oOagh+aVsOaNrlxyXG4gICAgKiBAcGFyYW0ge09iamVjdH0gZSDpvKDmoIfmlbDmja5cclxuICAgICovXHJcbiAgZnVuY3Rpb24gY2FsTW91c2UoZSkge1xyXG4gICAgY29uc3QgY2FudmFzID0gR2FtZS5jYW52YXM7XHJcbiAgICAvLyDorqHnrpfnlLvpnaLnvKnmlL7mr5TkvotcclxuICAgIGNvbnN0IHNjYWxlID0gR2FtZS5zY2FsZTtcclxuICAgIC8vIOeugOWMluS6i+S7tuWxnuaAp1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgeDogKGUuY2xpZW50WCAtIGNhbnZhcy5vZmZzZXRMZWZ0KSAvIHNjYWxlLFxyXG4gICAgICB5OiAoZS5jbGllbnRZIC0gY2FudmFzLm9mZnNldFRvcCkgLyBzY2FsZSxcclxuICAgICAgYnV0dG9uOiBlLmJ1dHRvblxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiuoeeul+inpuaOp+aVsOaNrlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBlIOinpuaOp+aVsOaNrlxyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIGNhbFRvdWNoKGUpIHtcclxuICAgIGNvbnN0IGNhbnZhcyA9IEdhbWUuY2FudmFzO1xyXG4gICAgY29uc3Qgc2NhbGUgPSBHYW1lLnNjYWxlO1xyXG4gICAgbGV0IHRvdWNoZXMgPSBbXTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZS50YXJnZXRUb3VjaGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IHRvdWNoID0gZS50YXJnZXRUb3VjaGVzW2ldO1xyXG4gICAgICB0b3VjaGVzLnB1c2goe1xyXG4gICAgICAgIHg6ICh0b3VjaC5jbGllbnRYIC0gY2FudmFzLm9mZnNldExlZnQpIC8gc2NhbGUsXHJcbiAgICAgICAgeTogKHRvdWNoLmNsaWVudFkgLSBjYW52YXMub2Zmc2V0VG9wKSAvIHNjYWxlLFxyXG4gICAgICAgIGlkOiB0b3VjaC5pZGVudGlmaWVyLFxyXG4gICAgICAgIHR5cGU6IGUudHlwZVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiB0b3VjaGVzO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIOWunueOsOWFqOWxj1xyXG4gKi9cclxuZnVuY3Rpb24gZnVsbFNjcmVlbigpIHtcclxuICB2YXIgZWwgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XHJcbiAgdmFyIHJmcyA9IGVsLnJlcXVlc3RGdWxsU2NyZWVuIHx8XHJcbiAgICBlbC53ZWJraXRSZXF1ZXN0RnVsbFNjcmVlbiB8fFxyXG4gICAgZWwubW96UmVxdWVzdEZ1bGxTY3JlZW4gfHxcclxuICAgIGVsLm1zUmVxdWVzdEZ1bGxzY3JlZW47XHJcbiAgaWYgKHR5cGVvZiByZnMgIT0gXCJ1bmRlZmluZWRcIiAmJiByZnMpIHtcclxuICAgIHJmcy5jYWxsKGVsKTtcclxuICB9O1xyXG59XHJcblxyXG4vKipcclxuICog6Ieq6YCC5bqU55S75biDXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBHYW1lIOa4uOaIj+WvueixoVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGF1dG9SZXNpemVDYW52YXMoR2FtZSkge1xyXG4gIHdpbmRvdy5vbnJlc2l6ZSA9IHdpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zdCByYXRpbyA9IEdhbWUucmF0aW87XHJcbiAgICBsZXQgd2lkdGggPSBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoO1xyXG4gICAgbGV0IGhlaWdodCA9IGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0O1xyXG4gICAgaWYgKHdpZHRoIC8gaGVpZ2h0ID4gcmF0aW8pIHtcclxuICAgICAgR2FtZS52aWV3SGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgICBHYW1lLnZpZXdXaWR0aCA9IHJhdGlvICogaGVpZ2h0O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgR2FtZS52aWV3V2lkdGggPSB3aWR0aDtcclxuICAgICAgR2FtZS52aWV3SGVpZ2h0ID0gd2lkdGggLyByYXRpbztcclxuICAgIH1cclxuICAgIEdhbWUuc2NhbGUgPSBHYW1lLnZpZXdIZWlnaHQgLyBHYW1lLmhlaWdodDtcclxuICAgIC8vIOiuvue9rmNhbnZhc+WuvemrmFxyXG4gICAgR2FtZS5jYW52YXMuc2V0QXR0cmlidXRlKFwid2lkdGhcIiwgR2FtZS52aWV3V2lkdGgpO1xyXG4gICAgR2FtZS5jYW52YXMuc2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIsIEdhbWUudmlld0hlaWdodCk7XHJcbiAgfVxyXG59Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/Game/Utils.js\n");

/***/ }),

/***/ "./src/Game/index.js":
/*!***************************!*\
  !*** ./src/Game/index.js ***!
  \***************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Asset_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Asset.js */ \"./src/Game/Asset.js\");\n/* harmony import */ var _Utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Utils.js */ \"./src/Game/Utils.js\");\n/* harmony import */ var _Common_Event_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Common/Event.js */ \"./src/Common/Event.js\");\n\r\n\r\n\r\n\r\n\r\nconst Game = {};\r\n\r\n// 初始化游戏\r\nGame.init = function (options) {\r\n  Object(_Utils_js__WEBPACK_IMPORTED_MODULE_1__[\"initStyle\"])();\r\n  // 画布\r\n  this.canvas = document.createElement('canvas');\r\n  document.body.appendChild(this.canvas);\r\n\r\n  // 画布上下文\r\n  this.context = this.canvas.getContext(\"2d\");\r\n\r\n  // 初始化宽度和高度\r\n  let bodyWidth = document.body.clientWidth;\r\n  let bodyHeight = document.body.clientHeight;\r\n  let defaultRatio = bodyWidth / bodyHeight;\r\n  if (options.width && options.height) {\r\n    this.width = this.viewWidth = options.width;\r\n    this.height = this.viewHeight = options.height;\r\n    this.ratio = options.width / options.height;\r\n  } else {\r\n    this.width = this.viewWidth = bodyWidth;\r\n    this.height = this.viewHeight = bodyHeight;\r\n    this.ratio = bodyWidth / bodyHeight;\r\n  }\r\n\r\n  if (this.ratio > defaultRatio) {\r\n    this.viewWidth = bodyWidth;\r\n    this.viewHeight = bodyWidth / this.ratio;\r\n  } else {\r\n    this.viewHeight = bodyHeight;\r\n    this.viewWidth = bodyHeight * this.ratio;\r\n  }\r\n\r\n  // 设置canvas宽高\r\n  this.canvas.setAttribute(\"width\", this.viewWidth);\r\n  this.canvas.setAttribute(\"height\", this.viewHeight);\r\n\r\n  // canvas黑色背景\r\n  this.canvas.style.backgroundColor = \"black\";\r\n\r\n  // 缩放\r\n  this.scale = this.viewHeight / this.height;\r\n\r\n  // 键盘状态\r\n  this.key = null;\r\n\r\n  // 用户事件\r\n  this.inputEvents = {};\r\n\r\n  // 动画间隔帧(每隔n帧绘制下一个关键帧)\r\n  this.animationInterval = options.animationInterval || 16;\r\n\r\n  // 测试模式\r\n  this.test = options.test || false;\r\n\r\n  // 是否移动端\r\n  this.isMobile = Object(_Utils_js__WEBPACK_IMPORTED_MODULE_1__[\"isMobile\"])();\r\n\r\n  // 资源路径\r\n  this.asset.setPath(options.publicPath);\r\n\r\n  Object(_Utils_js__WEBPACK_IMPORTED_MODULE_1__[\"autoResizeCanvas\"])(this);\r\n  Object(_Utils_js__WEBPACK_IMPORTED_MODULE_1__[\"listenInputEvent\"])(this);\r\n\r\n  // 禁用右键菜单\r\n  if (!this.test) {\r\n    window.oncontextmenu = function () {\r\n      return false;\r\n    }\r\n  }\r\n}\r\n\r\nGame.mix = function (Class, func) {\r\n  if (!Class[\"mixins\"]) {\r\n    Class[\"mixins\"] = [];\r\n  }\r\n  Class[\"mixins\"].push(func);\r\n}\r\n\r\nGame.asset = Object(_Asset_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(Game);\r\n\r\nGame.event = Object(_Common_Event_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(Game);\r\n\r\nGame.stage = null;\r\n\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (Game);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvR2FtZS9pbmRleC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9HYW1lL2luZGV4LmpzPzJiMzYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCJcclxuaW1wb3J0IGFzc2V0IGZyb20gXCIuL0Fzc2V0LmpzXCI7XHJcbmltcG9ydCB7IGxpc3RlbklucHV0RXZlbnQsIGF1dG9SZXNpemVDYW52YXMsIGlzTW9iaWxlLCBpbml0U3R5bGUgfSBmcm9tICcuL1V0aWxzLmpzJ1xyXG5pbXBvcnQgZXZlbnQgZnJvbSBcIi4uL0NvbW1vbi9FdmVudC5qc1wiO1xyXG5cclxuY29uc3QgR2FtZSA9IHt9O1xyXG5cclxuLy8g5Yid5aeL5YyW5ri45oiPXHJcbkdhbWUuaW5pdCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgaW5pdFN0eWxlKCk7XHJcbiAgLy8g55S75biDXHJcbiAgdGhpcy5jYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuY2FudmFzKTtcclxuXHJcbiAgLy8g55S75biD5LiK5LiL5paHXHJcbiAgdGhpcy5jb250ZXh0ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG5cclxuICAvLyDliJ3lp4vljJblrr3luqblkozpq5jluqZcclxuICBsZXQgYm9keVdpZHRoID0gZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aDtcclxuICBsZXQgYm9keUhlaWdodCA9IGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0O1xyXG4gIGxldCBkZWZhdWx0UmF0aW8gPSBib2R5V2lkdGggLyBib2R5SGVpZ2h0O1xyXG4gIGlmIChvcHRpb25zLndpZHRoICYmIG9wdGlvbnMuaGVpZ2h0KSB7XHJcbiAgICB0aGlzLndpZHRoID0gdGhpcy52aWV3V2lkdGggPSBvcHRpb25zLndpZHRoO1xyXG4gICAgdGhpcy5oZWlnaHQgPSB0aGlzLnZpZXdIZWlnaHQgPSBvcHRpb25zLmhlaWdodDtcclxuICAgIHRoaXMucmF0aW8gPSBvcHRpb25zLndpZHRoIC8gb3B0aW9ucy5oZWlnaHQ7XHJcbiAgfSBlbHNlIHtcclxuICAgIHRoaXMud2lkdGggPSB0aGlzLnZpZXdXaWR0aCA9IGJvZHlXaWR0aDtcclxuICAgIHRoaXMuaGVpZ2h0ID0gdGhpcy52aWV3SGVpZ2h0ID0gYm9keUhlaWdodDtcclxuICAgIHRoaXMucmF0aW8gPSBib2R5V2lkdGggLyBib2R5SGVpZ2h0O1xyXG4gIH1cclxuXHJcbiAgaWYgKHRoaXMucmF0aW8gPiBkZWZhdWx0UmF0aW8pIHtcclxuICAgIHRoaXMudmlld1dpZHRoID0gYm9keVdpZHRoO1xyXG4gICAgdGhpcy52aWV3SGVpZ2h0ID0gYm9keVdpZHRoIC8gdGhpcy5yYXRpbztcclxuICB9IGVsc2Uge1xyXG4gICAgdGhpcy52aWV3SGVpZ2h0ID0gYm9keUhlaWdodDtcclxuICAgIHRoaXMudmlld1dpZHRoID0gYm9keUhlaWdodCAqIHRoaXMucmF0aW87XHJcbiAgfVxyXG5cclxuICAvLyDorr7nva5jYW52YXPlrr3pq5hcclxuICB0aGlzLmNhbnZhcy5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLCB0aGlzLnZpZXdXaWR0aCk7XHJcbiAgdGhpcy5jYW52YXMuc2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIsIHRoaXMudmlld0hlaWdodCk7XHJcblxyXG4gIC8vIGNhbnZhc+m7keiJsuiDjOaZr1xyXG4gIHRoaXMuY2FudmFzLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiYmxhY2tcIjtcclxuXHJcbiAgLy8g57yp5pS+XHJcbiAgdGhpcy5zY2FsZSA9IHRoaXMudmlld0hlaWdodCAvIHRoaXMuaGVpZ2h0O1xyXG5cclxuICAvLyDplK7nm5jnirbmgIFcclxuICB0aGlzLmtleSA9IG51bGw7XHJcblxyXG4gIC8vIOeUqOaIt+S6i+S7tlxyXG4gIHRoaXMuaW5wdXRFdmVudHMgPSB7fTtcclxuXHJcbiAgLy8g5Yqo55S76Ze06ZqU5binKOavj+malG7luKfnu5jliLbkuIvkuIDkuKrlhbPplK7luKcpXHJcbiAgdGhpcy5hbmltYXRpb25JbnRlcnZhbCA9IG9wdGlvbnMuYW5pbWF0aW9uSW50ZXJ2YWwgfHwgMTY7XHJcblxyXG4gIC8vIOa1i+ivleaooeW8j1xyXG4gIHRoaXMudGVzdCA9IG9wdGlvbnMudGVzdCB8fCBmYWxzZTtcclxuXHJcbiAgLy8g5piv5ZCm56e75Yqo56uvXHJcbiAgdGhpcy5pc01vYmlsZSA9IGlzTW9iaWxlKCk7XHJcblxyXG4gIC8vIOi1hOa6kOi3r+W+hFxyXG4gIHRoaXMuYXNzZXQuc2V0UGF0aChvcHRpb25zLnB1YmxpY1BhdGgpO1xyXG5cclxuICBhdXRvUmVzaXplQ2FudmFzKHRoaXMpO1xyXG4gIGxpc3RlbklucHV0RXZlbnQodGhpcyk7XHJcblxyXG4gIC8vIOemgeeUqOWPs+mUruiPnOWNlVxyXG4gIGlmICghdGhpcy50ZXN0KSB7XHJcbiAgICB3aW5kb3cub25jb250ZXh0bWVudSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuR2FtZS5taXggPSBmdW5jdGlvbiAoQ2xhc3MsIGZ1bmMpIHtcclxuICBpZiAoIUNsYXNzW1wibWl4aW5zXCJdKSB7XHJcbiAgICBDbGFzc1tcIm1peGluc1wiXSA9IFtdO1xyXG4gIH1cclxuICBDbGFzc1tcIm1peGluc1wiXS5wdXNoKGZ1bmMpO1xyXG59XHJcblxyXG5HYW1lLmFzc2V0ID0gYXNzZXQoR2FtZSk7XHJcblxyXG5HYW1lLmV2ZW50ID0gZXZlbnQoR2FtZSk7XHJcblxyXG5HYW1lLnN0YWdlID0gbnVsbDtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IEdhbWUiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/Game/index.js\n");

/***/ }),

/***/ "./src/Sprite/Audio.js":
/*!*****************************!*\
  !*** ./src/Sprite/Audio.js ***!
  \*****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return audio; });\n/* harmony import */ var _Game_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Game/index.js */ \"./src/Game/index.js\");\n\r\n\r\nfunction audio(sprite) {\r\n  let music = {};\r\n  let sounds = [];\r\n\r\n  /**\r\n   * 获取单位和镜头的距离\r\n   * @returns 距离\r\n   */\r\n  function getDistance() {\r\n    const relX = sprite.relX;\r\n    const relY = sprite.relY;\r\n    return Math.sqrt(relX ** 2 + relY ** 2);\r\n  }\r\n\r\n  /**\r\n   * 播放音效\r\n   * @param {AudioNode} newAudio \r\n   * @param {Object} options \r\n   */\r\n  function playSound(newAudio, options) {\r\n    const newSound = newAudio.cloneNode();\r\n\r\n    newSound.volume = options.volume;\r\n    newSound.play();\r\n\r\n    sounds.push({\r\n      audio: newSound,\r\n      defalutVolume: options.volume,\r\n      range: options.range\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 播放音乐\r\n   * @param {AudioNode} newAudio \r\n   * @param {Object} options \r\n   */\r\n  function playMusic(newAudio, options) {\r\n    if (!music.audio || music.audio !== newAudio) {\r\n      music.audio = newAudio;\r\n      music.defalutVolume = options.volume;\r\n      music.range = options.range;\r\n\r\n      newAudio.volume = options.volume;\r\n      newAudio.loop = options.loop;\r\n    }\r\n    newAudio.play();\r\n  }\r\n\r\n  /**\r\n   * 设置音量\r\n   * @param {AudioNode} audio \r\n   * @param {number} range \r\n   * @param {number} defalutVolume \r\n   * @param {number} distance \r\n   */\r\n  function setVolume(audio, range, defalutVolume) {\r\n    const distance = getDistance()\r\n    if (!range) return;\r\n    if (distance >= range) {\r\n      audio.volume = 0;\r\n    } else {\r\n      audio.volume = defalutVolume * ((range - distance) / range);\r\n    }\r\n  }\r\n\r\n  return {\r\n    /**\r\n     * 更新音频\r\n     */\r\n    update() {\r\n      // 判断是否存在音频\r\n      if (!music.audio && sounds.length === 0) return;\r\n\r\n      // 音乐\r\n      if (music.audio && music.range > 0) {\r\n        setVolume(music.audio, music.range, music.defalutVolume);\r\n      }\r\n\r\n      // 音效\r\n      for (let i = 0; i < sounds.length; i++) {\r\n        const sound = sounds[i];\r\n        const audio = sound.audio;\r\n        // 移除播放完的音效\r\n        if (audio.ended === true) {\r\n          sounds.splice(i, 1);\r\n          audio.remove();\r\n          i--;\r\n          continue;\r\n        }\r\n        if (range > 0) {\r\n          setVolume(sound.audio, sound.range, sound.defalutVolume);\r\n        }\r\n      }\r\n    },\r\n    /**\r\n     * 播放音频\r\n     * @param {Object} options \r\n     */\r\n    play(options) {\r\n      const type = options.type;\r\n      const group = options.group;\r\n      const name = options.name;\r\n      const newAudio = _Game_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].asset.get(group, name);\r\n\r\n      if (!type) throw Error(\"Audio type is missing.\");\r\n\r\n      // 当类型为音效时，克隆一个独立节点来播放\r\n      // 当类型为音乐时，默认循环播放\r\n      if (type === 'sound') {\r\n        playSound(newAudio, options);\r\n      }\r\n      if (type === 'music') {\r\n        playMusic(newAudio, options)\r\n      }\r\n    },\r\n    /**\r\n     * 停止播放音乐\r\n     */\r\n    stop() {\r\n      music.pause();\r\n      music.currentTime = 0;\r\n    },\r\n    /**\r\n     * 清除所有音频\r\n     */\r\n    clear() {\r\n      if (music.audio) {\r\n        music.audio.remove();\r\n      }\r\n      sounds.forEach(function (sound) {\r\n        sound.audio.remove();\r\n      })\r\n    }\r\n  }\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvU3ByaXRlL0F1ZGlvLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL1Nwcml0ZS9BdWRpby5qcz81NjM3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBHYW1lIGZyb20gXCIuLi9HYW1lL2luZGV4LmpzXCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGF1ZGlvKHNwcml0ZSkge1xyXG4gIGxldCBtdXNpYyA9IHt9O1xyXG4gIGxldCBzb3VuZHMgPSBbXTtcclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W5Y2V5L2N5ZKM6ZWc5aS055qE6Led56a7XHJcbiAgICogQHJldHVybnMg6Led56a7XHJcbiAgICovXHJcbiAgZnVuY3Rpb24gZ2V0RGlzdGFuY2UoKSB7XHJcbiAgICBjb25zdCByZWxYID0gc3ByaXRlLnJlbFg7XHJcbiAgICBjb25zdCByZWxZID0gc3ByaXRlLnJlbFk7XHJcbiAgICByZXR1cm4gTWF0aC5zcXJ0KHJlbFggKiogMiArIHJlbFkgKiogMik7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmkq3mlL7pn7PmlYhcclxuICAgKiBAcGFyYW0ge0F1ZGlvTm9kZX0gbmV3QXVkaW8gXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgXHJcbiAgICovXHJcbiAgZnVuY3Rpb24gcGxheVNvdW5kKG5ld0F1ZGlvLCBvcHRpb25zKSB7XHJcbiAgICBjb25zdCBuZXdTb3VuZCA9IG5ld0F1ZGlvLmNsb25lTm9kZSgpO1xyXG5cclxuICAgIG5ld1NvdW5kLnZvbHVtZSA9IG9wdGlvbnMudm9sdW1lO1xyXG4gICAgbmV3U291bmQucGxheSgpO1xyXG5cclxuICAgIHNvdW5kcy5wdXNoKHtcclxuICAgICAgYXVkaW86IG5ld1NvdW5kLFxyXG4gICAgICBkZWZhbHV0Vm9sdW1lOiBvcHRpb25zLnZvbHVtZSxcclxuICAgICAgcmFuZ2U6IG9wdGlvbnMucmFuZ2VcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5pKt5pS+6Z+z5LmQXHJcbiAgICogQHBhcmFtIHtBdWRpb05vZGV9IG5ld0F1ZGlvIFxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIFxyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIHBsYXlNdXNpYyhuZXdBdWRpbywgb3B0aW9ucykge1xyXG4gICAgaWYgKCFtdXNpYy5hdWRpbyB8fCBtdXNpYy5hdWRpbyAhPT0gbmV3QXVkaW8pIHtcclxuICAgICAgbXVzaWMuYXVkaW8gPSBuZXdBdWRpbztcclxuICAgICAgbXVzaWMuZGVmYWx1dFZvbHVtZSA9IG9wdGlvbnMudm9sdW1lO1xyXG4gICAgICBtdXNpYy5yYW5nZSA9IG9wdGlvbnMucmFuZ2U7XHJcblxyXG4gICAgICBuZXdBdWRpby52b2x1bWUgPSBvcHRpb25zLnZvbHVtZTtcclxuICAgICAgbmV3QXVkaW8ubG9vcCA9IG9wdGlvbnMubG9vcDtcclxuICAgIH1cclxuICAgIG5ld0F1ZGlvLnBsYXkoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiuvue9rumfs+mHj1xyXG4gICAqIEBwYXJhbSB7QXVkaW9Ob2RlfSBhdWRpbyBcclxuICAgKiBAcGFyYW0ge251bWJlcn0gcmFuZ2UgXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGRlZmFsdXRWb2x1bWUgXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGRpc3RhbmNlIFxyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIHNldFZvbHVtZShhdWRpbywgcmFuZ2UsIGRlZmFsdXRWb2x1bWUpIHtcclxuICAgIGNvbnN0IGRpc3RhbmNlID0gZ2V0RGlzdGFuY2UoKVxyXG4gICAgaWYgKCFyYW5nZSkgcmV0dXJuO1xyXG4gICAgaWYgKGRpc3RhbmNlID49IHJhbmdlKSB7XHJcbiAgICAgIGF1ZGlvLnZvbHVtZSA9IDA7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBhdWRpby52b2x1bWUgPSBkZWZhbHV0Vm9sdW1lICogKChyYW5nZSAtIGRpc3RhbmNlKSAvIHJhbmdlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICAvKipcclxuICAgICAqIOabtOaWsOmfs+mikVxyXG4gICAgICovXHJcbiAgICB1cGRhdGUoKSB7XHJcbiAgICAgIC8vIOWIpOaWreaYr+WQpuWtmOWcqOmfs+mikVxyXG4gICAgICBpZiAoIW11c2ljLmF1ZGlvICYmIHNvdW5kcy5sZW5ndGggPT09IDApIHJldHVybjtcclxuXHJcbiAgICAgIC8vIOmfs+S5kFxyXG4gICAgICBpZiAobXVzaWMuYXVkaW8gJiYgbXVzaWMucmFuZ2UgPiAwKSB7XHJcbiAgICAgICAgc2V0Vm9sdW1lKG11c2ljLmF1ZGlvLCBtdXNpYy5yYW5nZSwgbXVzaWMuZGVmYWx1dFZvbHVtZSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIOmfs+aViFxyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNvdW5kcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IHNvdW5kID0gc291bmRzW2ldO1xyXG4gICAgICAgIGNvbnN0IGF1ZGlvID0gc291bmQuYXVkaW87XHJcbiAgICAgICAgLy8g56e76Zmk5pKt5pS+5a6M55qE6Z+z5pWIXHJcbiAgICAgICAgaWYgKGF1ZGlvLmVuZGVkID09PSB0cnVlKSB7XHJcbiAgICAgICAgICBzb3VuZHMuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgYXVkaW8ucmVtb3ZlKCk7XHJcbiAgICAgICAgICBpLS07XHJcbiAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJhbmdlID4gMCkge1xyXG4gICAgICAgICAgc2V0Vm9sdW1lKHNvdW5kLmF1ZGlvLCBzb3VuZC5yYW5nZSwgc291bmQuZGVmYWx1dFZvbHVtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiDmkq3mlL7pn7PpopFcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIFxyXG4gICAgICovXHJcbiAgICBwbGF5KG9wdGlvbnMpIHtcclxuICAgICAgY29uc3QgdHlwZSA9IG9wdGlvbnMudHlwZTtcclxuICAgICAgY29uc3QgZ3JvdXAgPSBvcHRpb25zLmdyb3VwO1xyXG4gICAgICBjb25zdCBuYW1lID0gb3B0aW9ucy5uYW1lO1xyXG4gICAgICBjb25zdCBuZXdBdWRpbyA9IEdhbWUuYXNzZXQuZ2V0KGdyb3VwLCBuYW1lKTtcclxuXHJcbiAgICAgIGlmICghdHlwZSkgdGhyb3cgRXJyb3IoXCJBdWRpbyB0eXBlIGlzIG1pc3NpbmcuXCIpO1xyXG5cclxuICAgICAgLy8g5b2T57G75Z6L5Li66Z+z5pWI5pe277yM5YWL6ZqG5LiA5Liq54us56uL6IqC54K55p2l5pKt5pS+XHJcbiAgICAgIC8vIOW9k+exu+Wei+S4uumfs+S5kOaXtu+8jOm7mOiupOW+queOr+aSreaUvlxyXG4gICAgICBpZiAodHlwZSA9PT0gJ3NvdW5kJykge1xyXG4gICAgICAgIHBsYXlTb3VuZChuZXdBdWRpbywgb3B0aW9ucyk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHR5cGUgPT09ICdtdXNpYycpIHtcclxuICAgICAgICBwbGF5TXVzaWMobmV3QXVkaW8sIG9wdGlvbnMpXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIOWBnOatouaSreaUvumfs+S5kFxyXG4gICAgICovXHJcbiAgICBzdG9wKCkge1xyXG4gICAgICBtdXNpYy5wYXVzZSgpO1xyXG4gICAgICBtdXNpYy5jdXJyZW50VGltZSA9IDA7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiDmuIXpmaTmiYDmnInpn7PpopFcclxuICAgICAqL1xyXG4gICAgY2xlYXIoKSB7XHJcbiAgICAgIGlmIChtdXNpYy5hdWRpbykge1xyXG4gICAgICAgIG11c2ljLmF1ZGlvLnJlbW92ZSgpO1xyXG4gICAgICB9XHJcbiAgICAgIHNvdW5kcy5mb3JFYWNoKGZ1bmN0aW9uIChzb3VuZCkge1xyXG4gICAgICAgIHNvdW5kLmF1ZGlvLnJlbW92ZSgpO1xyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gIH1cclxufSJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/Sprite/Audio.js\n");

/***/ }),

/***/ "./src/Sprite/Graphics.js":
/*!********************************!*\
  !*** ./src/Sprite/Graphics.js ***!
  \********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return graphics; });\n/* harmony import */ var _Game_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Game/index.js */ \"./src/Game/index.js\");\n\r\n\r\nfunction graphics(sprite) {\r\n  const ctx = _Game_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].canvas.getContext('2d');\r\n  const floor = Math.floor;\r\n\r\n  /**\r\n   * 绘制执行函数\r\n   */\r\n  let executor = null;\r\n\r\n  /**\r\n   * 设置尺寸\r\n   * @param {number} width 宽度\r\n   * @param {number} height 高度\r\n   * @param {boolean} sameSize 是否与图片相同尺寸\r\n   */\r\n  function setSize(width, height, sameSize) {\r\n    // 设置单位绘制尺寸\r\n    sprite.drawWidth = width;\r\n    sprite.drawHeight = height;\r\n\r\n    if (sameSize) {\r\n      sprite.width = width;\r\n      sprite.height = height;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取精灵数据\r\n   */\r\n  function getData() {\r\n    return {\r\n      relX: sprite.relX,\r\n      relY: sprite.relY,\r\n      offsetLeft: sprite.offsetLeft,\r\n      offsetTop: sprite.offsetTop,\r\n      width: sprite.width,\r\n      height: sprite.height,\r\n      drawWidth: sprite.drawWidth,\r\n      drawHeight: sprite.drawHeight,\r\n      scale: sprite.scale,\r\n      flip: sprite.flip\r\n    };\r\n  }\r\n\r\n  /**\r\n   * 绘制图片\r\n   * @param {Image} image 图片\r\n   */\r\n  function drawImage(image) {\r\n    var { relX, relY, offsetLeft, offsetTop, width, drawWidth, drawHeight, scale, flip } = getData();\r\n    if (!flip) {\r\n      var tranlateX = floor(relX + offsetLeft);\r\n      var tranlateY = floor(relY + offsetTop);\r\n      ctx.drawImage(image, 0, 0, drawWidth, drawHeight, tranlateX, tranlateY, drawWidth * scale, drawHeight * scale);\r\n    } else {\r\n      var tranlateX = floor(_Game_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].width - width * scale - relX + offsetLeft);\r\n      var tranlateY = floor(relY + offsetTop);\r\n\r\n      // 水平翻转绘制\r\n      drawFlip(_Game_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].width, function () {\r\n        ctx.drawImage(image, 0, 0, drawWidth, drawHeight, tranlateX, tranlateY, drawWidth * scale, drawHeight * scale);\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 绘制动画\r\n   * @param {Image} image 图片\r\n   * @param {number} currFrame 当前帧\r\n   * @param {boolean} imageFlip 是否翻转\r\n   */\r\n  function drawAnimation(image, currFrame, imageFlip) {\r\n    var { relX, relY, offsetLeft, offsetTop, width, drawWidth, drawHeight, scale, flip } = getData();\r\n\r\n    // 图片方向\r\n    if (!imageFlip && !flip || imageFlip && flip) {\r\n      var tranlateX = floor(relX + offsetLeft);\r\n      var tranlateY = floor(relY + offsetTop);\r\n      ctx.drawImage(image, currFrame * drawWidth, 0, drawWidth, drawHeight, tranlateX, tranlateY, drawWidth * scale, drawHeight * scale);\r\n    } else {\r\n      var tranlateX = floor(_Game_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].width - width * scale - relX + offsetLeft);\r\n      var tranlateY = floor(relY + offsetTop);\r\n\r\n      // 水平翻转绘制\r\n      drawFlip(_Game_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].width, function () {\r\n        ctx.drawImage(image, currFrame * drawWidth, 0, drawWidth, drawHeight, tranlateX, tranlateY, drawWidth * scale, drawHeight * scale);\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 翻转绘制\r\n   * @param {number} width 宽度\r\n   * @param {Function} drawCb 绘制函数\r\n   */\r\n  function drawFlip(width, drawCb) {\r\n    ctx.translate(width, 0);\r\n    ctx.scale(-1, 1);\r\n    drawCb();\r\n    ctx.translate(width, 0);\r\n    ctx.scale(-1, 1);\r\n  }\r\n\r\n  /**\r\n   * 测试开启时调用\r\n   */\r\n  function test() {\r\n    ctx.strokeStyle = 'red';\r\n    ctx.strokeRect(sprite.relX, sprite.relY, sprite.width, sprite.height);\r\n  }\r\n\r\n  return {\r\n    /**\r\n     * 绘制动画\r\n     * @param {string} group 资源分组\r\n     * @param {string} name 资源名\r\n     * @param {boolean} sameSize 是否与图片相同尺寸\r\n     */\r\n    animation(group, name, sameSize = false) {\r\n      // 获取动画数据\r\n      let anim = _Game_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].asset.get(group, name);\r\n\r\n      setSize(anim.image.width / anim.frame, anim.image.height, sameSize);\r\n      // 动画属性\r\n      let options = {\r\n        // 动画帧数\r\n        animationFrames: anim.frame,\r\n        // 动画间隔帧\r\n        animationInterval: anim.interval || _Game_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].animationInterval,\r\n        // 动画帧宽度\r\n        width: sprite.drawWidth,\r\n        // 动画帧高度\r\n        height: sprite.drawHeight,\r\n        // 是否翻转\r\n        flip: anim.flip,\r\n        // 完成时\r\n        onComplete: null,\r\n      };\r\n\r\n      // 绘制函数使用的变量\r\n      let currInterval = 0;\r\n      let currFrame = 0;\r\n\r\n      // 绘制函数\r\n      executor = function () {\r\n        // 绘制动画\r\n        drawAnimation(anim.image, currFrame, options.flip);\r\n\r\n        // 动画间隔帧增加\r\n        currInterval++;\r\n\r\n        // 判断计数是否小于间隔帧数\r\n        if (currInterval >= options.animationInterval) {\r\n          // 动画当前间隔帧归零\r\n          currInterval = 0;\r\n\r\n          // 动画关键帧增加\r\n          currFrame++;\r\n\r\n          // 判断是否播放完成\r\n          if (currFrame >= options.animationFrames) {\r\n            // 动画重置\r\n            currFrame = 0;\r\n\r\n            // 动画完成时执行函数\r\n            options.onComplete && options.onComplete.call(this);\r\n          }\r\n        }\r\n      }\r\n\r\n      // 返回数据\r\n      return options;\r\n    },\r\n    /**\r\n     * 清除绘制\r\n     */\r\n    clear() {\r\n      executor = null;\r\n    },\r\n    /**\r\n     * 使用原生API绘制\r\n     * @param {Function} drawCb 绘制函数\r\n     */\r\n    draw(drawCb) {\r\n      executor = function () {\r\n        drawCb.call(sprite, ctx);\r\n      }\r\n    },\r\n    /**\r\n     * 绘制图片\r\n     * @param {string} group 资源分组\r\n     * @param {string} name 资源名\r\n     * @param {boolean} sameSize 是否与图片相同尺寸\r\n     */\r\n    image(group, name, sameSize = false) {\r\n      // 获取图片数据\r\n      let image = _Game_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].asset.get(group, name);\r\n\r\n      setSize(image.width, image.height, sameSize);\r\n\r\n      // 绘制函数\r\n      executor = function () {\r\n        drawImage(image);\r\n      }\r\n    },\r\n    /**\r\n     * 混合绘制(混合绘制是在另一个画布上绘制后再复制到原画布上，不会影响原画布)\r\n     * @param {string} type 绘制类型\r\n     * @param {Function} drawCb 绘制函数\r\n     */\r\n    mix(type, drawCb) {\r\n      let mixCanvas = _Game_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].canvas.cloneNode();\r\n      let ctx = mixCanvas.getContext('2d');\r\n      let mixImage = new Image();\r\n      if (type === 'static') {\r\n        ctx.clearRect(0, 0, _Game_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].width, _Game_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].height);\r\n        drawCb(ctx);\r\n        mixImage.src = mixCanvas.toDataURL(\"image/png\");\r\n        executor = function () {\r\n          ctx.drawImage(mixImage, 0, 0);\r\n        }\r\n      } else if (type === 'dynamic') {\r\n        executor = function () {\r\n          ctx.clearRect(0, 0, _Game_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].width, _Game_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].height);\r\n          drawCb(ctx);\r\n          mixImage.src = mixCanvas.toDataURL(\"image/png\");\r\n          ctx.drawImage(mixImage, 0, 0);\r\n        }\r\n      }\r\n    },\r\n    /**\r\n     * 绘制粒子\r\n     * @param {string} group 资源分组\r\n     * @param {string} name 资源名\r\n     * @param {number} interval 间隔帧\r\n     * @param {Array<number>} alphaRange 透明度范围\r\n     * @param {Array<number>} scaleRange 缩放度范围\r\n     */\r\n    particle(group, name, interval, alphaRange, scaleRange) {\r\n      let image = _Game_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].asset.get(group, name);\r\n\r\n      // 设置单位尺寸(粒子单位没有宽度和高度)\r\n      sprite.width = 0;\r\n      sprite.height = 0;\r\n      sprite.drawWidth = image.width;\r\n      sprite.drawHeight = image.height;\r\n\r\n      // 设置粒子属性\r\n      let nextAlpha, nextscale;\r\n\r\n      // 检查粒子是否有透明度变化\r\n      if (alphaRange) {\r\n        nextAlpha = (alphaRange[1] - alphaRange[0]) / interval;\r\n      }\r\n\r\n      // 检查粒子是否有尺寸变化\r\n      if (scaleRange) {\r\n        nextscale = (scaleRange[1] - scaleRange[0]) / interval;\r\n        sprite.scale = scaleRange[1];\r\n      }\r\n\r\n      executor = function () {\r\n        // 透明度变化\r\n        if (nextAlpha != null) {\r\n          if (sprite.alpha + nextAlpha <= alphaRange[0] || sprite.alpha + nextAlpha >= alphaRange[1]) {\r\n            nextAlpha = -nextAlpha;\r\n          }\r\n          sprite.alpha += nextAlpha;\r\n        }\r\n\r\n        // 尺寸变化\r\n        if (nextscale != null) {\r\n          if (sprite.scale + nextscale <= scaleRange[0] || sprite.scale + nextscale >= scaleRange[1]) {\r\n            nextscale = - nextscale;\r\n          }\r\n          sprite.scale += nextscale;\r\n        }\r\n\r\n        drawImage(image);\r\n      }\r\n    },\r\n    /**\r\n     * 渲染\r\n     */\r\n    render() {\r\n      let { relX, relY, width, height, scale, alpha } = sprite.scale;\r\n      if (alpha <= 0) {\r\n        sprite.alpha = 0;\r\n        return;\r\n      }\r\n      if (relX + width * scale < 0 ||\r\n        relX > _Game_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].width ||\r\n        relY + height * scale < 0 ||\r\n        relY > _Game_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].height) return;\r\n      ctx.globalAlpha = alpha;\r\n      executor && executor();\r\n      _Game_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].test && test();\r\n    }\r\n  }\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvU3ByaXRlL0dyYXBoaWNzLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL1Nwcml0ZS9HcmFwaGljcy5qcz81ZDEzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBHYW1lIGZyb20gXCIuLi9HYW1lL2luZGV4LmpzXCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdyYXBoaWNzKHNwcml0ZSkge1xyXG4gIGNvbnN0IGN0eCA9IEdhbWUuY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcbiAgY29uc3QgZmxvb3IgPSBNYXRoLmZsb29yO1xyXG5cclxuICAvKipcclxuICAgKiDnu5jliLbmiafooYzlh73mlbBcclxuICAgKi9cclxuICBsZXQgZXhlY3V0b3IgPSBudWxsO1xyXG5cclxuICAvKipcclxuICAgKiDorr7nva7lsLrlr7hcclxuICAgKiBAcGFyYW0ge251bWJlcn0gd2lkdGgg5a695bqmXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGhlaWdodCDpq5jluqZcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHNhbWVTaXplIOaYr+WQpuS4juWbvueJh+ebuOWQjOWwuuWvuFxyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIHNldFNpemUod2lkdGgsIGhlaWdodCwgc2FtZVNpemUpIHtcclxuICAgIC8vIOiuvue9ruWNleS9jee7mOWItuWwuuWvuFxyXG4gICAgc3ByaXRlLmRyYXdXaWR0aCA9IHdpZHRoO1xyXG4gICAgc3ByaXRlLmRyYXdIZWlnaHQgPSBoZWlnaHQ7XHJcblxyXG4gICAgaWYgKHNhbWVTaXplKSB7XHJcbiAgICAgIHNwcml0ZS53aWR0aCA9IHdpZHRoO1xyXG4gICAgICBzcHJpdGUuaGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W57K+54G15pWw5o2uXHJcbiAgICovXHJcbiAgZnVuY3Rpb24gZ2V0RGF0YSgpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHJlbFg6IHNwcml0ZS5yZWxYLFxyXG4gICAgICByZWxZOiBzcHJpdGUucmVsWSxcclxuICAgICAgb2Zmc2V0TGVmdDogc3ByaXRlLm9mZnNldExlZnQsXHJcbiAgICAgIG9mZnNldFRvcDogc3ByaXRlLm9mZnNldFRvcCxcclxuICAgICAgd2lkdGg6IHNwcml0ZS53aWR0aCxcclxuICAgICAgaGVpZ2h0OiBzcHJpdGUuaGVpZ2h0LFxyXG4gICAgICBkcmF3V2lkdGg6IHNwcml0ZS5kcmF3V2lkdGgsXHJcbiAgICAgIGRyYXdIZWlnaHQ6IHNwcml0ZS5kcmF3SGVpZ2h0LFxyXG4gICAgICBzY2FsZTogc3ByaXRlLnNjYWxlLFxyXG4gICAgICBmbGlwOiBzcHJpdGUuZmxpcFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOe7mOWItuWbvueJh1xyXG4gICAqIEBwYXJhbSB7SW1hZ2V9IGltYWdlIOWbvueJh1xyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIGRyYXdJbWFnZShpbWFnZSkge1xyXG4gICAgdmFyIHsgcmVsWCwgcmVsWSwgb2Zmc2V0TGVmdCwgb2Zmc2V0VG9wLCB3aWR0aCwgZHJhd1dpZHRoLCBkcmF3SGVpZ2h0LCBzY2FsZSwgZmxpcCB9ID0gZ2V0RGF0YSgpO1xyXG4gICAgaWYgKCFmbGlwKSB7XHJcbiAgICAgIHZhciB0cmFubGF0ZVggPSBmbG9vcihyZWxYICsgb2Zmc2V0TGVmdCk7XHJcbiAgICAgIHZhciB0cmFubGF0ZVkgPSBmbG9vcihyZWxZICsgb2Zmc2V0VG9wKTtcclxuICAgICAgY3R4LmRyYXdJbWFnZShpbWFnZSwgMCwgMCwgZHJhd1dpZHRoLCBkcmF3SGVpZ2h0LCB0cmFubGF0ZVgsIHRyYW5sYXRlWSwgZHJhd1dpZHRoICogc2NhbGUsIGRyYXdIZWlnaHQgKiBzY2FsZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB2YXIgdHJhbmxhdGVYID0gZmxvb3IoR2FtZS53aWR0aCAtIHdpZHRoICogc2NhbGUgLSByZWxYICsgb2Zmc2V0TGVmdCk7XHJcbiAgICAgIHZhciB0cmFubGF0ZVkgPSBmbG9vcihyZWxZICsgb2Zmc2V0VG9wKTtcclxuXHJcbiAgICAgIC8vIOawtOW5s+e/u+i9rOe7mOWItlxyXG4gICAgICBkcmF3RmxpcChHYW1lLndpZHRoLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY3R4LmRyYXdJbWFnZShpbWFnZSwgMCwgMCwgZHJhd1dpZHRoLCBkcmF3SGVpZ2h0LCB0cmFubGF0ZVgsIHRyYW5sYXRlWSwgZHJhd1dpZHRoICogc2NhbGUsIGRyYXdIZWlnaHQgKiBzY2FsZSk7XHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDnu5jliLbliqjnlLtcclxuICAgKiBAcGFyYW0ge0ltYWdlfSBpbWFnZSDlm77niYdcclxuICAgKiBAcGFyYW0ge251bWJlcn0gY3VyckZyYW1lIOW9k+WJjeW4p1xyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gaW1hZ2VGbGlwIOaYr+WQpue/u+i9rFxyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIGRyYXdBbmltYXRpb24oaW1hZ2UsIGN1cnJGcmFtZSwgaW1hZ2VGbGlwKSB7XHJcbiAgICB2YXIgeyByZWxYLCByZWxZLCBvZmZzZXRMZWZ0LCBvZmZzZXRUb3AsIHdpZHRoLCBkcmF3V2lkdGgsIGRyYXdIZWlnaHQsIHNjYWxlLCBmbGlwIH0gPSBnZXREYXRhKCk7XHJcblxyXG4gICAgLy8g5Zu+54mH5pa55ZCRXHJcbiAgICBpZiAoIWltYWdlRmxpcCAmJiAhZmxpcCB8fCBpbWFnZUZsaXAgJiYgZmxpcCkge1xyXG4gICAgICB2YXIgdHJhbmxhdGVYID0gZmxvb3IocmVsWCArIG9mZnNldExlZnQpO1xyXG4gICAgICB2YXIgdHJhbmxhdGVZID0gZmxvb3IocmVsWSArIG9mZnNldFRvcCk7XHJcbiAgICAgIGN0eC5kcmF3SW1hZ2UoaW1hZ2UsIGN1cnJGcmFtZSAqIGRyYXdXaWR0aCwgMCwgZHJhd1dpZHRoLCBkcmF3SGVpZ2h0LCB0cmFubGF0ZVgsIHRyYW5sYXRlWSwgZHJhd1dpZHRoICogc2NhbGUsIGRyYXdIZWlnaHQgKiBzY2FsZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB2YXIgdHJhbmxhdGVYID0gZmxvb3IoR2FtZS53aWR0aCAtIHdpZHRoICogc2NhbGUgLSByZWxYICsgb2Zmc2V0TGVmdCk7XHJcbiAgICAgIHZhciB0cmFubGF0ZVkgPSBmbG9vcihyZWxZICsgb2Zmc2V0VG9wKTtcclxuXHJcbiAgICAgIC8vIOawtOW5s+e/u+i9rOe7mOWItlxyXG4gICAgICBkcmF3RmxpcChHYW1lLndpZHRoLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY3R4LmRyYXdJbWFnZShpbWFnZSwgY3VyckZyYW1lICogZHJhd1dpZHRoLCAwLCBkcmF3V2lkdGgsIGRyYXdIZWlnaHQsIHRyYW5sYXRlWCwgdHJhbmxhdGVZLCBkcmF3V2lkdGggKiBzY2FsZSwgZHJhd0hlaWdodCAqIHNjYWxlKTtcclxuICAgICAgfSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOe/u+i9rOe7mOWItlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB3aWR0aCDlrr3luqZcclxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBkcmF3Q2Ig57uY5Yi25Ye95pWwXHJcbiAgICovXHJcbiAgZnVuY3Rpb24gZHJhd0ZsaXAod2lkdGgsIGRyYXdDYikge1xyXG4gICAgY3R4LnRyYW5zbGF0ZSh3aWR0aCwgMCk7XHJcbiAgICBjdHguc2NhbGUoLTEsIDEpO1xyXG4gICAgZHJhd0NiKCk7XHJcbiAgICBjdHgudHJhbnNsYXRlKHdpZHRoLCAwKTtcclxuICAgIGN0eC5zY2FsZSgtMSwgMSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmtYvor5XlvIDlkK/ml7bosIPnlKhcclxuICAgKi9cclxuICBmdW5jdGlvbiB0ZXN0KCkge1xyXG4gICAgY3R4LnN0cm9rZVN0eWxlID0gJ3JlZCc7XHJcbiAgICBjdHguc3Ryb2tlUmVjdChzcHJpdGUucmVsWCwgc3ByaXRlLnJlbFksIHNwcml0ZS53aWR0aCwgc3ByaXRlLmhlaWdodCk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgLyoqXHJcbiAgICAgKiDnu5jliLbliqjnlLtcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBncm91cCDotYTmupDliIbnu4RcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIOi1hOa6kOWQjVxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBzYW1lU2l6ZSDmmK/lkKbkuI7lm77niYfnm7jlkIzlsLrlr7hcclxuICAgICAqL1xyXG4gICAgYW5pbWF0aW9uKGdyb3VwLCBuYW1lLCBzYW1lU2l6ZSA9IGZhbHNlKSB7XHJcbiAgICAgIC8vIOiOt+WPluWKqOeUu+aVsOaNrlxyXG4gICAgICBsZXQgYW5pbSA9IEdhbWUuYXNzZXQuZ2V0KGdyb3VwLCBuYW1lKTtcclxuXHJcbiAgICAgIHNldFNpemUoYW5pbS5pbWFnZS53aWR0aCAvIGFuaW0uZnJhbWUsIGFuaW0uaW1hZ2UuaGVpZ2h0LCBzYW1lU2l6ZSk7XHJcbiAgICAgIC8vIOWKqOeUu+WxnuaAp1xyXG4gICAgICBsZXQgb3B0aW9ucyA9IHtcclxuICAgICAgICAvLyDliqjnlLvluKfmlbBcclxuICAgICAgICBhbmltYXRpb25GcmFtZXM6IGFuaW0uZnJhbWUsXHJcbiAgICAgICAgLy8g5Yqo55S76Ze06ZqU5binXHJcbiAgICAgICAgYW5pbWF0aW9uSW50ZXJ2YWw6IGFuaW0uaW50ZXJ2YWwgfHwgR2FtZS5hbmltYXRpb25JbnRlcnZhbCxcclxuICAgICAgICAvLyDliqjnlLvluKflrr3luqZcclxuICAgICAgICB3aWR0aDogc3ByaXRlLmRyYXdXaWR0aCxcclxuICAgICAgICAvLyDliqjnlLvluKfpq5jluqZcclxuICAgICAgICBoZWlnaHQ6IHNwcml0ZS5kcmF3SGVpZ2h0LFxyXG4gICAgICAgIC8vIOaYr+WQpue/u+i9rFxyXG4gICAgICAgIGZsaXA6IGFuaW0uZmxpcCxcclxuICAgICAgICAvLyDlrozmiJDml7ZcclxuICAgICAgICBvbkNvbXBsZXRlOiBudWxsLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy8g57uY5Yi25Ye95pWw5L2/55So55qE5Y+Y6YePXHJcbiAgICAgIGxldCBjdXJySW50ZXJ2YWwgPSAwO1xyXG4gICAgICBsZXQgY3VyckZyYW1lID0gMDtcclxuXHJcbiAgICAgIC8vIOe7mOWItuWHveaVsFxyXG4gICAgICBleGVjdXRvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyDnu5jliLbliqjnlLtcclxuICAgICAgICBkcmF3QW5pbWF0aW9uKGFuaW0uaW1hZ2UsIGN1cnJGcmFtZSwgb3B0aW9ucy5mbGlwKTtcclxuXHJcbiAgICAgICAgLy8g5Yqo55S76Ze06ZqU5bin5aKe5YqgXHJcbiAgICAgICAgY3VyckludGVydmFsKys7XHJcblxyXG4gICAgICAgIC8vIOWIpOaWreiuoeaVsOaYr+WQpuWwj+S6jumXtOmalOW4p+aVsFxyXG4gICAgICAgIGlmIChjdXJySW50ZXJ2YWwgPj0gb3B0aW9ucy5hbmltYXRpb25JbnRlcnZhbCkge1xyXG4gICAgICAgICAgLy8g5Yqo55S75b2T5YmN6Ze06ZqU5bin5b2S6Zu2XHJcbiAgICAgICAgICBjdXJySW50ZXJ2YWwgPSAwO1xyXG5cclxuICAgICAgICAgIC8vIOWKqOeUu+WFs+mUruW4p+WinuWKoFxyXG4gICAgICAgICAgY3VyckZyYW1lKys7XHJcblxyXG4gICAgICAgICAgLy8g5Yik5pat5piv5ZCm5pKt5pS+5a6M5oiQXHJcbiAgICAgICAgICBpZiAoY3VyckZyYW1lID49IG9wdGlvbnMuYW5pbWF0aW9uRnJhbWVzKSB7XHJcbiAgICAgICAgICAgIC8vIOWKqOeUu+mHjee9rlxyXG4gICAgICAgICAgICBjdXJyRnJhbWUgPSAwO1xyXG5cclxuICAgICAgICAgICAgLy8g5Yqo55S75a6M5oiQ5pe25omn6KGM5Ye95pWwXHJcbiAgICAgICAgICAgIG9wdGlvbnMub25Db21wbGV0ZSAmJiBvcHRpb25zLm9uQ29tcGxldGUuY2FsbCh0aGlzKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIOi/lOWbnuaVsOaNrlxyXG4gICAgICByZXR1cm4gb3B0aW9ucztcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIOa4hemZpOe7mOWItlxyXG4gICAgICovXHJcbiAgICBjbGVhcigpIHtcclxuICAgICAgZXhlY3V0b3IgPSBudWxsO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICog5L2/55So5Y6f55SfQVBJ57uY5Yi2XHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBkcmF3Q2Ig57uY5Yi25Ye95pWwXHJcbiAgICAgKi9cclxuICAgIGRyYXcoZHJhd0NiKSB7XHJcbiAgICAgIGV4ZWN1dG9yID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGRyYXdDYi5jYWxsKHNwcml0ZSwgY3R4KTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICog57uY5Yi25Zu+54mHXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZ3JvdXAg6LWE5rqQ5YiG57uEXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSDotYTmupDlkI1cclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gc2FtZVNpemUg5piv5ZCm5LiO5Zu+54mH55u45ZCM5bC65a+4XHJcbiAgICAgKi9cclxuICAgIGltYWdlKGdyb3VwLCBuYW1lLCBzYW1lU2l6ZSA9IGZhbHNlKSB7XHJcbiAgICAgIC8vIOiOt+WPluWbvueJh+aVsOaNrlxyXG4gICAgICBsZXQgaW1hZ2UgPSBHYW1lLmFzc2V0LmdldChncm91cCwgbmFtZSk7XHJcblxyXG4gICAgICBzZXRTaXplKGltYWdlLndpZHRoLCBpbWFnZS5oZWlnaHQsIHNhbWVTaXplKTtcclxuXHJcbiAgICAgIC8vIOe7mOWItuWHveaVsFxyXG4gICAgICBleGVjdXRvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBkcmF3SW1hZ2UoaW1hZ2UpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiDmt7flkIjnu5jliLYo5re35ZCI57uY5Yi25piv5Zyo5Y+m5LiA5Liq55S75biD5LiK57uY5Yi25ZCO5YaN5aSN5Yi25Yiw5Y6f55S75biD5LiK77yM5LiN5Lya5b2x5ZON5Y6f55S75biDKVxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUg57uY5Yi257G75Z6LXHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBkcmF3Q2Ig57uY5Yi25Ye95pWwXHJcbiAgICAgKi9cclxuICAgIG1peCh0eXBlLCBkcmF3Q2IpIHtcclxuICAgICAgbGV0IG1peENhbnZhcyA9IEdhbWUuY2FudmFzLmNsb25lTm9kZSgpO1xyXG4gICAgICBsZXQgY3R4ID0gbWl4Q2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICAgIGxldCBtaXhJbWFnZSA9IG5ldyBJbWFnZSgpO1xyXG4gICAgICBpZiAodHlwZSA9PT0gJ3N0YXRpYycpIHtcclxuICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIEdhbWUud2lkdGgsIEdhbWUuaGVpZ2h0KTtcclxuICAgICAgICBkcmF3Q2IoY3R4KTtcclxuICAgICAgICBtaXhJbWFnZS5zcmMgPSBtaXhDYW52YXMudG9EYXRhVVJMKFwiaW1hZ2UvcG5nXCIpO1xyXG4gICAgICAgIGV4ZWN1dG9yID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgY3R4LmRyYXdJbWFnZShtaXhJbWFnZSwgMCwgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdkeW5hbWljJykge1xyXG4gICAgICAgIGV4ZWN1dG9yID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBHYW1lLndpZHRoLCBHYW1lLmhlaWdodCk7XHJcbiAgICAgICAgICBkcmF3Q2IoY3R4KTtcclxuICAgICAgICAgIG1peEltYWdlLnNyYyA9IG1peENhbnZhcy50b0RhdGFVUkwoXCJpbWFnZS9wbmdcIik7XHJcbiAgICAgICAgICBjdHguZHJhd0ltYWdlKG1peEltYWdlLCAwLCAwKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIOe7mOWItueykuWtkFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGdyb3VwIOi1hOa6kOWIhue7hFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUg6LWE5rqQ5ZCNXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaW50ZXJ2YWwg6Ze06ZqU5binXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGFscGhhUmFuZ2Ug6YCP5piO5bqm6IyD5Zu0XHJcbiAgICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHNjYWxlUmFuZ2Ug57yp5pS+5bqm6IyD5Zu0XHJcbiAgICAgKi9cclxuICAgIHBhcnRpY2xlKGdyb3VwLCBuYW1lLCBpbnRlcnZhbCwgYWxwaGFSYW5nZSwgc2NhbGVSYW5nZSkge1xyXG4gICAgICBsZXQgaW1hZ2UgPSBHYW1lLmFzc2V0LmdldChncm91cCwgbmFtZSk7XHJcblxyXG4gICAgICAvLyDorr7nva7ljZXkvY3lsLrlr7go57KS5a2Q5Y2V5L2N5rKh5pyJ5a695bqm5ZKM6auY5bqmKVxyXG4gICAgICBzcHJpdGUud2lkdGggPSAwO1xyXG4gICAgICBzcHJpdGUuaGVpZ2h0ID0gMDtcclxuICAgICAgc3ByaXRlLmRyYXdXaWR0aCA9IGltYWdlLndpZHRoO1xyXG4gICAgICBzcHJpdGUuZHJhd0hlaWdodCA9IGltYWdlLmhlaWdodDtcclxuXHJcbiAgICAgIC8vIOiuvue9rueykuWtkOWxnuaAp1xyXG4gICAgICBsZXQgbmV4dEFscGhhLCBuZXh0c2NhbGU7XHJcblxyXG4gICAgICAvLyDmo4Dmn6XnspLlrZDmmK/lkKbmnInpgI/mmI7luqblj5jljJZcclxuICAgICAgaWYgKGFscGhhUmFuZ2UpIHtcclxuICAgICAgICBuZXh0QWxwaGEgPSAoYWxwaGFSYW5nZVsxXSAtIGFscGhhUmFuZ2VbMF0pIC8gaW50ZXJ2YWw7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIOajgOafpeeykuWtkOaYr+WQpuacieWwuuWvuOWPmOWMllxyXG4gICAgICBpZiAoc2NhbGVSYW5nZSkge1xyXG4gICAgICAgIG5leHRzY2FsZSA9IChzY2FsZVJhbmdlWzFdIC0gc2NhbGVSYW5nZVswXSkgLyBpbnRlcnZhbDtcclxuICAgICAgICBzcHJpdGUuc2NhbGUgPSBzY2FsZVJhbmdlWzFdO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBleGVjdXRvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyDpgI/mmI7luqblj5jljJZcclxuICAgICAgICBpZiAobmV4dEFscGhhICE9IG51bGwpIHtcclxuICAgICAgICAgIGlmIChzcHJpdGUuYWxwaGEgKyBuZXh0QWxwaGEgPD0gYWxwaGFSYW5nZVswXSB8fCBzcHJpdGUuYWxwaGEgKyBuZXh0QWxwaGEgPj0gYWxwaGFSYW5nZVsxXSkge1xyXG4gICAgICAgICAgICBuZXh0QWxwaGEgPSAtbmV4dEFscGhhO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgc3ByaXRlLmFscGhhICs9IG5leHRBbHBoYTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOWwuuWvuOWPmOWMllxyXG4gICAgICAgIGlmIChuZXh0c2NhbGUgIT0gbnVsbCkge1xyXG4gICAgICAgICAgaWYgKHNwcml0ZS5zY2FsZSArIG5leHRzY2FsZSA8PSBzY2FsZVJhbmdlWzBdIHx8IHNwcml0ZS5zY2FsZSArIG5leHRzY2FsZSA+PSBzY2FsZVJhbmdlWzFdKSB7XHJcbiAgICAgICAgICAgIG5leHRzY2FsZSA9IC0gbmV4dHNjYWxlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgc3ByaXRlLnNjYWxlICs9IG5leHRzY2FsZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGRyYXdJbWFnZShpbWFnZSk7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIOa4suafk1xyXG4gICAgICovXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgIGxldCB7IHJlbFgsIHJlbFksIHdpZHRoLCBoZWlnaHQsIHNjYWxlLCBhbHBoYSB9ID0gc3ByaXRlLnNjYWxlO1xyXG4gICAgICBpZiAoYWxwaGEgPD0gMCkge1xyXG4gICAgICAgIHNwcml0ZS5hbHBoYSA9IDA7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChyZWxYICsgd2lkdGggKiBzY2FsZSA8IDAgfHxcclxuICAgICAgICByZWxYID4gR2FtZS53aWR0aCB8fFxyXG4gICAgICAgIHJlbFkgKyBoZWlnaHQgKiBzY2FsZSA8IDAgfHxcclxuICAgICAgICByZWxZID4gR2FtZS5oZWlnaHQpIHJldHVybjtcclxuICAgICAgY3R4Lmdsb2JhbEFscGhhID0gYWxwaGE7XHJcbiAgICAgIGV4ZWN1dG9yICYmIGV4ZWN1dG9yKCk7XHJcbiAgICAgIEdhbWUudGVzdCAmJiB0ZXN0KCk7XHJcbiAgICB9XHJcbiAgfVxyXG59Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/Sprite/Graphics.js\n");

/***/ }),

/***/ "./src/Sprite/Input.js":
/*!*****************************!*\
  !*** ./src/Sprite/Input.js ***!
  \*****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return input; });\n/* harmony import */ var _Game_index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Game/index */ \"./src/Game/index.js\");\n\r\n\r\nfunction input(sprite) {\r\n  let inputEvents = _Game_index__WEBPACK_IMPORTED_MODULE_0__[\"default\"].inputEvents;\r\n\r\n  return {\r\n    // 监听\r\n    watch(eventType, callback) {\r\n      // 为精灵创建独立事件\r\n      if (!inputEvents[sprite.id]) inputEvents[sprite.id] = {};\r\n\r\n      // 添加事件到输入事件中\r\n      inputEvents[sprite.id][eventType] = callback.bind(sprite);\r\n    },\r\n    // 解除监听\r\n    unwatch(eventType) {\r\n      // 判断用户事件是否存在\r\n      if (!eventType || !inputEvents[sprite.id] || !inputEvents[sprite.id][eventType]) return;\r\n\r\n      // 解除监听\r\n      delete _Game_index__WEBPACK_IMPORTED_MODULE_0__[\"default\"].inputEvents[sprite.id][eventType];\r\n    }\r\n  };\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvU3ByaXRlL0lucHV0LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL1Nwcml0ZS9JbnB1dC5qcz80ZTFhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBHYW1lIGZyb20gJy4uL0dhbWUvaW5kZXgnXHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpbnB1dChzcHJpdGUpIHtcclxuICBsZXQgaW5wdXRFdmVudHMgPSBHYW1lLmlucHV0RXZlbnRzO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgLy8g55uR5ZCsXHJcbiAgICB3YXRjaChldmVudFR5cGUsIGNhbGxiYWNrKSB7XHJcbiAgICAgIC8vIOS4uueyvueBteWIm+W7uueLrOeri+S6i+S7tlxyXG4gICAgICBpZiAoIWlucHV0RXZlbnRzW3Nwcml0ZS5pZF0pIGlucHV0RXZlbnRzW3Nwcml0ZS5pZF0gPSB7fTtcclxuXHJcbiAgICAgIC8vIOa3u+WKoOS6i+S7tuWIsOi+k+WFpeS6i+S7tuS4rVxyXG4gICAgICBpbnB1dEV2ZW50c1tzcHJpdGUuaWRdW2V2ZW50VHlwZV0gPSBjYWxsYmFjay5iaW5kKHNwcml0ZSk7XHJcbiAgICB9LFxyXG4gICAgLy8g6Kej6Zmk55uR5ZCsXHJcbiAgICB1bndhdGNoKGV2ZW50VHlwZSkge1xyXG4gICAgICAvLyDliKTmlq3nlKjmiLfkuovku7bmmK/lkKblrZjlnKhcclxuICAgICAgaWYgKCFldmVudFR5cGUgfHwgIWlucHV0RXZlbnRzW3Nwcml0ZS5pZF0gfHwgIWlucHV0RXZlbnRzW3Nwcml0ZS5pZF1bZXZlbnRUeXBlXSkgcmV0dXJuO1xyXG5cclxuICAgICAgLy8g6Kej6Zmk55uR5ZCsXHJcbiAgICAgIGRlbGV0ZSBHYW1lLmlucHV0RXZlbnRzW3Nwcml0ZS5pZF1bZXZlbnRUeXBlXTtcclxuICAgIH1cclxuICB9O1xyXG59Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/Sprite/Input.js\n");

/***/ }),

/***/ "./src/Sprite/index.js":
/*!*****************************!*\
  !*** ./src/Sprite/index.js ***!
  \*****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Game_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Game/index.js */ \"./src/Game/index.js\");\n/* harmony import */ var _Graphics_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Graphics.js */ \"./src/Sprite/Graphics.js\");\n/* harmony import */ var _Audio_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Audio.js */ \"./src/Sprite/Audio.js\");\n/* harmony import */ var _Common_Event_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Common/Event.js */ \"./src/Common/Event.js\");\n/* harmony import */ var _Input_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Input.js */ \"./src/Sprite/Input.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * 精灵构造函数\r\n * @param {Object} options\r\n */\r\nclass Sprite {\r\n  constructor(options) {\r\n    // 备份options\r\n    this.$options = options\r\n\r\n    // 初始化生命周期函数\r\n    this.beforeCreate = options.beforeCreate || null;\r\n    this.created = options.created || null;\r\n    this.beforeUpdate = options.beforeUpdate || null;\r\n    this.updated = options.updated || null;\r\n    this.beforeDestroy = options.beforeDestroy || null;\r\n    this.destroyed = options.destroyed || null;\r\n\r\n    this.beforeCreate && this.beforeCreate();\r\n\r\n    // 设置参数\r\n    let config = options.config;\r\n\r\n    // 检查id是否填写\r\n    if (config.id == null) {\r\n      throw new Error('Sprite needs an id.');\r\n    }\r\n    // 检查id是否为纯数字\r\n    if (!isNaN(Number(config.id))) {\r\n      throw new Error('Sprite must start with a letter.');\r\n    }\r\n\r\n    // id 为单位主键\r\n    this.id = config.id;\r\n\r\n    // x 为单位横坐标\r\n    this.x = this.relX = config.x || 0;\r\n\r\n    // y 为单位纵坐标\r\n    this.y = this.relY = config.y || 0;\r\n\r\n    // width 为单位真实宽度\r\n    this.width = config.width || 0;\r\n\r\n    // height 为单位真实高度\r\n    this.height = config.height || 0;\r\n\r\n    // offsetLeft 为单位横向偏移量\r\n    this.offsetLeft = config.offsetLeft || 0;\r\n\r\n    // offsetTop 为单位纵向偏移量\r\n    this.offsetTop = config.offsetTop || 0;\r\n\r\n    // global 决定是否为全局单位\r\n    this.global = config.global || false;\r\n\r\n    // alpha 决定绘制透明度\r\n    this.alpha = config.alpha || 1;\r\n\r\n    // scale 决定绘制尺寸\r\n    this.scale = config.scale || 1;\r\n\r\n    /**\r\n     * flip 决定精灵是否翻转\r\n     * 默认为false，朝右\r\n     */\r\n    this.flip = config.flip || false;\r\n\r\n    // layer 决定图片上下关系，layer越大，单位越晚渲染\r\n    this.layer = config.layer || 0;\r\n\r\n    // diasabled 为true时无法执行单位事件和用户事件\r\n    this.disabled = config.disabled || false;\r\n\r\n    // fixed 为单位固定参数\r\n    // 为0时随镜头移动\r\n    // 为1时固定在页面上，不会随镜头移动\r\n    // 在0~1之间会出现分层移动效果\r\n    this.fixed = config.fixed || 0;\r\n\r\n    this.graphics = Object(_Graphics_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(this);\r\n    this.audio = Object(_Audio_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(this);\r\n    this.event = Object(_Common_Event_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(this);\r\n    this.input = Object(_Input_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(this);\r\n\r\n    // 暴露实例数据到this中\r\n    for (var key in options.data) {\r\n      this[key] = options.data[key];\r\n    }\r\n\r\n    // 暴露实例事件到this中\r\n    for (var key in options.methods) {\r\n      this[key] = options.methods[key];\r\n    }\r\n\r\n    // 混入\r\n    if (Sprite.mixins) {\r\n      var sprite = this;\r\n      Sprite.mixins.forEach(function (mixin) {\r\n        mixin.call(sprite);\r\n      });\r\n    }\r\n\r\n    // 添加到游戏单位中\r\n    _Game_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].stage.sprite.add(this);\r\n\r\n    // 单位创建后\r\n    options.created && options.created.call(this);\r\n  }\r\n}\r\n\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (Sprite);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvU3ByaXRlL2luZGV4LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL1Nwcml0ZS9pbmRleC5qcz8yNzIwIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiXHJcbmltcG9ydCBHYW1lIGZyb20gXCIuLi9HYW1lL2luZGV4LmpzXCI7XHJcbmltcG9ydCBncmFwaGljcyBmcm9tIFwiLi9HcmFwaGljcy5qc1wiO1xyXG5pbXBvcnQgYXVkaW8gZnJvbSBcIi4vQXVkaW8uanNcIjtcclxuaW1wb3J0IGV2ZW50IGZyb20gXCIuLi9Db21tb24vRXZlbnQuanNcIjtcclxuaW1wb3J0IGlucHV0IGZyb20gXCIuL0lucHV0LmpzXCI7XHJcblxyXG4vKipcclxuICog57K+54G15p6E6YCg5Ye95pWwXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXHJcbiAqL1xyXG5jbGFzcyBTcHJpdGUge1xyXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgIC8vIOWkh+S7vW9wdGlvbnNcclxuICAgIHRoaXMuJG9wdGlvbnMgPSBvcHRpb25zXHJcblxyXG4gICAgLy8g5Yid5aeL5YyW55Sf5ZG95ZGo5pyf5Ye95pWwXHJcbiAgICB0aGlzLmJlZm9yZUNyZWF0ZSA9IG9wdGlvbnMuYmVmb3JlQ3JlYXRlIHx8IG51bGw7XHJcbiAgICB0aGlzLmNyZWF0ZWQgPSBvcHRpb25zLmNyZWF0ZWQgfHwgbnVsbDtcclxuICAgIHRoaXMuYmVmb3JlVXBkYXRlID0gb3B0aW9ucy5iZWZvcmVVcGRhdGUgfHwgbnVsbDtcclxuICAgIHRoaXMudXBkYXRlZCA9IG9wdGlvbnMudXBkYXRlZCB8fCBudWxsO1xyXG4gICAgdGhpcy5iZWZvcmVEZXN0cm95ID0gb3B0aW9ucy5iZWZvcmVEZXN0cm95IHx8IG51bGw7XHJcbiAgICB0aGlzLmRlc3Ryb3llZCA9IG9wdGlvbnMuZGVzdHJveWVkIHx8IG51bGw7XHJcblxyXG4gICAgdGhpcy5iZWZvcmVDcmVhdGUgJiYgdGhpcy5iZWZvcmVDcmVhdGUoKTtcclxuXHJcbiAgICAvLyDorr7nva7lj4LmlbBcclxuICAgIGxldCBjb25maWcgPSBvcHRpb25zLmNvbmZpZztcclxuXHJcbiAgICAvLyDmo4Dmn6VpZOaYr+WQpuWhq+WGmVxyXG4gICAgaWYgKGNvbmZpZy5pZCA9PSBudWxsKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignU3ByaXRlIG5lZWRzIGFuIGlkLicpO1xyXG4gICAgfVxyXG4gICAgLy8g5qOA5p+laWTmmK/lkKbkuLrnuq/mlbDlrZdcclxuICAgIGlmICghaXNOYU4oTnVtYmVyKGNvbmZpZy5pZCkpKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignU3ByaXRlIG11c3Qgc3RhcnQgd2l0aCBhIGxldHRlci4nKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBpZCDkuLrljZXkvY3kuLvplK5cclxuICAgIHRoaXMuaWQgPSBjb25maWcuaWQ7XHJcblxyXG4gICAgLy8geCDkuLrljZXkvY3mqKrlnZDmoIdcclxuICAgIHRoaXMueCA9IHRoaXMucmVsWCA9IGNvbmZpZy54IHx8IDA7XHJcblxyXG4gICAgLy8geSDkuLrljZXkvY3nurXlnZDmoIdcclxuICAgIHRoaXMueSA9IHRoaXMucmVsWSA9IGNvbmZpZy55IHx8IDA7XHJcblxyXG4gICAgLy8gd2lkdGgg5Li65Y2V5L2N55yf5a6e5a695bqmXHJcbiAgICB0aGlzLndpZHRoID0gY29uZmlnLndpZHRoIHx8IDA7XHJcblxyXG4gICAgLy8gaGVpZ2h0IOS4uuWNleS9jeecn+WunumrmOW6plxyXG4gICAgdGhpcy5oZWlnaHQgPSBjb25maWcuaGVpZ2h0IHx8IDA7XHJcblxyXG4gICAgLy8gb2Zmc2V0TGVmdCDkuLrljZXkvY3mqKrlkJHlgY/np7vph49cclxuICAgIHRoaXMub2Zmc2V0TGVmdCA9IGNvbmZpZy5vZmZzZXRMZWZ0IHx8IDA7XHJcblxyXG4gICAgLy8gb2Zmc2V0VG9wIOS4uuWNleS9jee6teWQkeWBj+enu+mHj1xyXG4gICAgdGhpcy5vZmZzZXRUb3AgPSBjb25maWcub2Zmc2V0VG9wIHx8IDA7XHJcblxyXG4gICAgLy8gZ2xvYmFsIOWGs+WumuaYr+WQpuS4uuWFqOWxgOWNleS9jVxyXG4gICAgdGhpcy5nbG9iYWwgPSBjb25maWcuZ2xvYmFsIHx8IGZhbHNlO1xyXG5cclxuICAgIC8vIGFscGhhIOWGs+Wumue7mOWItumAj+aYjuW6plxyXG4gICAgdGhpcy5hbHBoYSA9IGNvbmZpZy5hbHBoYSB8fCAxO1xyXG5cclxuICAgIC8vIHNjYWxlIOWGs+Wumue7mOWItuWwuuWvuFxyXG4gICAgdGhpcy5zY2FsZSA9IGNvbmZpZy5zY2FsZSB8fCAxO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogZmxpcCDlhrPlrprnsr7ngbXmmK/lkKbnv7vovaxcclxuICAgICAqIOm7mOiupOS4umZhbHNl77yM5pyd5Y+zXHJcbiAgICAgKi9cclxuICAgIHRoaXMuZmxpcCA9IGNvbmZpZy5mbGlwIHx8IGZhbHNlO1xyXG5cclxuICAgIC8vIGxheWVyIOWGs+WumuWbvueJh+S4iuS4i+WFs+ezu++8jGxheWVy6LaK5aSn77yM5Y2V5L2N6LaK5pma5riy5p+TXHJcbiAgICB0aGlzLmxheWVyID0gY29uZmlnLmxheWVyIHx8IDA7XHJcblxyXG4gICAgLy8gZGlhc2FibGVkIOS4unRydWXml7bml6Dms5XmiafooYzljZXkvY3kuovku7blkoznlKjmiLfkuovku7ZcclxuICAgIHRoaXMuZGlzYWJsZWQgPSBjb25maWcuZGlzYWJsZWQgfHwgZmFsc2U7XHJcblxyXG4gICAgLy8gZml4ZWQg5Li65Y2V5L2N5Zu65a6a5Y+C5pWwXHJcbiAgICAvLyDkuLow5pe26ZqP6ZWc5aS056e75YqoXHJcbiAgICAvLyDkuLox5pe25Zu65a6a5Zyo6aG16Z2i5LiK77yM5LiN5Lya6ZqP6ZWc5aS056e75YqoXHJcbiAgICAvLyDlnKgwfjHkuYvpl7TkvJrlh7rnjrDliIblsYLnp7vliqjmlYjmnpxcclxuICAgIHRoaXMuZml4ZWQgPSBjb25maWcuZml4ZWQgfHwgMDtcclxuXHJcbiAgICB0aGlzLmdyYXBoaWNzID0gZ3JhcGhpY3ModGhpcyk7XHJcbiAgICB0aGlzLmF1ZGlvID0gYXVkaW8odGhpcyk7XHJcbiAgICB0aGlzLmV2ZW50ID0gZXZlbnQodGhpcyk7XHJcbiAgICB0aGlzLmlucHV0ID0gaW5wdXQodGhpcyk7XHJcblxyXG4gICAgLy8g5pq06Zyy5a6e5L6L5pWw5o2u5YiwdGhpc+S4rVxyXG4gICAgZm9yICh2YXIga2V5IGluIG9wdGlvbnMuZGF0YSkge1xyXG4gICAgICB0aGlzW2tleV0gPSBvcHRpb25zLmRhdGFba2V5XTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDmmrTpnLLlrp7kvovkuovku7bliLB0aGlz5LitXHJcbiAgICBmb3IgKHZhciBrZXkgaW4gb3B0aW9ucy5tZXRob2RzKSB7XHJcbiAgICAgIHRoaXNba2V5XSA9IG9wdGlvbnMubWV0aG9kc1trZXldO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOa3t+WFpVxyXG4gICAgaWYgKFNwcml0ZS5taXhpbnMpIHtcclxuICAgICAgdmFyIHNwcml0ZSA9IHRoaXM7XHJcbiAgICAgIFNwcml0ZS5taXhpbnMuZm9yRWFjaChmdW5jdGlvbiAobWl4aW4pIHtcclxuICAgICAgICBtaXhpbi5jYWxsKHNwcml0ZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOa3u+WKoOWIsOa4uOaIj+WNleS9jeS4rVxyXG4gICAgR2FtZS5zdGFnZS5zcHJpdGUuYWRkKHRoaXMpO1xyXG5cclxuICAgIC8vIOWNleS9jeWIm+W7uuWQjlxyXG4gICAgb3B0aW9ucy5jcmVhdGVkICYmIG9wdGlvbnMuY3JlYXRlZC5jYWxsKHRoaXMpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgU3ByaXRlIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/Sprite/index.js\n");

/***/ }),

/***/ "./src/Stage/Camera.js":
/*!*****************************!*\
  !*** ./src/Stage/Camera.js ***!
  \*****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return camera; });\n/* harmony import */ var _Game_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Game/index.js */ \"./src/Game/index.js\");\n/* harmony import */ var _Sprite_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Sprite/index.js */ \"./src/Sprite/index.js\");\n\r\n\r\n\r\nfunction camera(stage) {\r\n  /**\r\n   * 初始化相机对象\r\n   */\r\n  var camera = {\r\n    x: 0,\r\n    y: 0,\r\n    follow: null,\r\n    movement: null\r\n  };\r\n\r\n  /**\r\n   * 创建相机移动函数\r\n   * @param {number} x \r\n   * @param {number} y\r\n   * @param {number} time\r\n   * @param {Function} callback \r\n   * @param {boolean} disable \r\n   */\r\n  function createMovement(x, y, time, callback, disable = true) {\r\n    // 计算数据\r\n    const frames = time * 60 || 1;\r\n    const perX = x / frames;\r\n    const perY = y / frames;\r\n\r\n    if (perX === 0 && perY === 0) return;\r\n\r\n    // 取消相机跟随\r\n    camera.follow = null;\r\n\r\n    // 获取边界尺寸\r\n    const { width: sw, height: sh } = stage;\r\n    const { width: gw, height: gh } = _Game_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].width;\r\n\r\n    // 移动计数\r\n    var count = 0;\r\n\r\n    // 禁用单位\r\n    if (disable === true) {\r\n      _Game_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].sprite.travel(function (sprite) {\r\n        sprite.disabled = true;\r\n      })\r\n    }\r\n\r\n    // 修改镜头移动函数\r\n    camera.movement = function () {\r\n      // 相机移动\r\n      camera.x += perX;\r\n      camera.y += perY;\r\n\r\n      // 移动计数增加\r\n      count++;\r\n\r\n      // 判断移动计数和相机位置\r\n      if (count > frames ||\r\n        (camera.x < 0 || camera.x > sw - gw) ||\r\n        (camera.y < 0 || camera.y > sh - gh)) {\r\n        camera.x = Math.max(0, camera.x)\r\n        camera.x = Math.min(camera.x, sw - gw)\r\n        camera.y = Math.max(0, camera.y)\r\n        camera.y = Math.min(camera.y, sh - gh)\r\n\r\n        // 清空相机移动函数\r\n        camera.movement = null;\r\n\r\n        // 启用单位\r\n        if (disable === true) {\r\n          _Game_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].sprite.travel(function (sprite) {\r\n            sprite.disabled = false;\r\n          });\r\n        }\r\n\r\n        // 执行回调函数\r\n        callback && callback();\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 计算镜头位置\r\n   */\r\n  function cameraCal() {\r\n    let follow = camera.follow;\r\n    // 当相机跟随单位时\r\n    if (follow) {\r\n      const position = borderCal(follow);\r\n      camera.x = position.x;\r\n      camera.y = position.y;\r\n    } else {\r\n      // 执行相机移动函数\r\n      camera.movement && camera.movement();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 计算边界问题\r\n   * @param {Sprite} sprite \r\n   */\r\n  function borderCal(sprite) {\r\n    const { x: ux, y: uy, width: uw, height: uh } = sprite;\r\n    const { width: sw, height: sh } = stage;\r\n    const { width: gw, height: gh } = _Game_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"];\r\n    let x, y;\r\n\r\n    // 相机处于舞台宽度范围内才会跟随单位x变化，否则固定值\r\n    if (ux < (gw - uw) / 2) {\r\n      x = 0;\r\n    } else if (ux > sw - (gw + uw) / 2) {\r\n      x = sw - gw;\r\n    } else {\r\n      x = ux - (gw - uw) / 2;\r\n    }\r\n\r\n    // 相机处于舞台高度范围内才会跟随单位x变化，否则固定值\r\n    if (uy < (gh - uh) / 2) {\r\n      y = 0;\r\n    } else if (uy > sh - (gh + uh) / 2) {\r\n      y = sh - gh;\r\n    } else {\r\n      y = uy - (gh - uh) / 2;\r\n    }\r\n\r\n    return { x, y };\r\n  }\r\n\r\n  return {\r\n    /**\r\n     * 镜头跟随\r\n     * @param {Sprite} sprite \r\n     */\r\n    follow(sprite) {\r\n      if (sprite === camera.follow) return;\r\n      camera.follow = sprite;\r\n    },\r\n    /**\r\n     * 更新镜头数据\r\n     */\r\n    update() {\r\n      // 计算镜头数据\r\n      cameraCal();\r\n      // 返回镜头数据\r\n      return camera;\r\n    },\r\n    /**\r\n     * 镜头移动\r\n     * @param {number} x \r\n     * @param {number} y \r\n     * @param {number} time \r\n     * @param {Function} callback \r\n     */\r\n    move(x, y, time, callback) {\r\n      createMovement(x, y, time, callback);\r\n    },\r\n    /**\r\n     * 镜头移动到单位\r\n     * @param {Sprite} sprite \r\n     * @param {number} time \r\n     * @param {Function} callback \r\n     */\r\n    moveTo(sprite, time, callback) {\r\n      // 边界计算\r\n      let { x, y } = borderCal(sprite);\r\n\r\n      createMovement((x - camera.x), (y - camera.y), time, callback);\r\n    },\r\n    /**\r\n     * 解除跟随\r\n     */\r\n    unFollow() {\r\n      camera.follow = null;\r\n    }\r\n  };\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvU3RhZ2UvQ2FtZXJhLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL1N0YWdlL0NhbWVyYS5qcz9iNDdjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBHYW1lIGZyb20gXCIuLi9HYW1lL2luZGV4LmpzXCJcclxuaW1wb3J0IFNwcml0ZSBmcm9tIFwiLi4vU3ByaXRlL2luZGV4LmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjYW1lcmEoc3RhZ2UpIHtcclxuICAvKipcclxuICAgKiDliJ3lp4vljJbnm7jmnLrlr7nosaFcclxuICAgKi9cclxuICB2YXIgY2FtZXJhID0ge1xyXG4gICAgeDogMCxcclxuICAgIHk6IDAsXHJcbiAgICBmb2xsb3c6IG51bGwsXHJcbiAgICBtb3ZlbWVudDogbnVsbFxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIOWIm+W7uuebuOacuuenu+WKqOWHveaVsFxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4IFxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5XHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHRpbWVcclxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGRpc2FibGUgXHJcbiAgICovXHJcbiAgZnVuY3Rpb24gY3JlYXRlTW92ZW1lbnQoeCwgeSwgdGltZSwgY2FsbGJhY2ssIGRpc2FibGUgPSB0cnVlKSB7XHJcbiAgICAvLyDorqHnrpfmlbDmja5cclxuICAgIGNvbnN0IGZyYW1lcyA9IHRpbWUgKiA2MCB8fCAxO1xyXG4gICAgY29uc3QgcGVyWCA9IHggLyBmcmFtZXM7XHJcbiAgICBjb25zdCBwZXJZID0geSAvIGZyYW1lcztcclxuXHJcbiAgICBpZiAocGVyWCA9PT0gMCAmJiBwZXJZID09PSAwKSByZXR1cm47XHJcblxyXG4gICAgLy8g5Y+W5raI55u45py66Lef6ZqPXHJcbiAgICBjYW1lcmEuZm9sbG93ID0gbnVsbDtcclxuXHJcbiAgICAvLyDojrflj5bovrnnlYzlsLrlr7hcclxuICAgIGNvbnN0IHsgd2lkdGg6IHN3LCBoZWlnaHQ6IHNoIH0gPSBzdGFnZTtcclxuICAgIGNvbnN0IHsgd2lkdGg6IGd3LCBoZWlnaHQ6IGdoIH0gPSBHYW1lLndpZHRoO1xyXG5cclxuICAgIC8vIOenu+WKqOiuoeaVsFxyXG4gICAgdmFyIGNvdW50ID0gMDtcclxuXHJcbiAgICAvLyDnpoHnlKjljZXkvY1cclxuICAgIGlmIChkaXNhYmxlID09PSB0cnVlKSB7XHJcbiAgICAgIEdhbWUuc3ByaXRlLnRyYXZlbChmdW5jdGlvbiAoc3ByaXRlKSB7XHJcbiAgICAgICAgc3ByaXRlLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICAvLyDkv67mlLnplZzlpLTnp7vliqjlh73mlbBcclxuICAgIGNhbWVyYS5tb3ZlbWVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgLy8g55u45py656e75YqoXHJcbiAgICAgIGNhbWVyYS54ICs9IHBlclg7XHJcbiAgICAgIGNhbWVyYS55ICs9IHBlclk7XHJcblxyXG4gICAgICAvLyDnp7vliqjorqHmlbDlop7liqBcclxuICAgICAgY291bnQrKztcclxuXHJcbiAgICAgIC8vIOWIpOaWreenu+WKqOiuoeaVsOWSjOebuOacuuS9jee9rlxyXG4gICAgICBpZiAoY291bnQgPiBmcmFtZXMgfHxcclxuICAgICAgICAoY2FtZXJhLnggPCAwIHx8IGNhbWVyYS54ID4gc3cgLSBndykgfHxcclxuICAgICAgICAoY2FtZXJhLnkgPCAwIHx8IGNhbWVyYS55ID4gc2ggLSBnaCkpIHtcclxuICAgICAgICBjYW1lcmEueCA9IE1hdGgubWF4KDAsIGNhbWVyYS54KVxyXG4gICAgICAgIGNhbWVyYS54ID0gTWF0aC5taW4oY2FtZXJhLngsIHN3IC0gZ3cpXHJcbiAgICAgICAgY2FtZXJhLnkgPSBNYXRoLm1heCgwLCBjYW1lcmEueSlcclxuICAgICAgICBjYW1lcmEueSA9IE1hdGgubWluKGNhbWVyYS55LCBzaCAtIGdoKVxyXG5cclxuICAgICAgICAvLyDmuIXnqbrnm7jmnLrnp7vliqjlh73mlbBcclxuICAgICAgICBjYW1lcmEubW92ZW1lbnQgPSBudWxsO1xyXG5cclxuICAgICAgICAvLyDlkK/nlKjljZXkvY1cclxuICAgICAgICBpZiAoZGlzYWJsZSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgR2FtZS5zcHJpdGUudHJhdmVsKGZ1bmN0aW9uIChzcHJpdGUpIHtcclxuICAgICAgICAgICAgc3ByaXRlLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOaJp+ihjOWbnuiwg+WHveaVsFxyXG4gICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiuoeeul+mVnOWktOS9jee9rlxyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIGNhbWVyYUNhbCgpIHtcclxuICAgIGxldCBmb2xsb3cgPSBjYW1lcmEuZm9sbG93O1xyXG4gICAgLy8g5b2T55u45py66Lef6ZqP5Y2V5L2N5pe2XHJcbiAgICBpZiAoZm9sbG93KSB7XHJcbiAgICAgIGNvbnN0IHBvc2l0aW9uID0gYm9yZGVyQ2FsKGZvbGxvdyk7XHJcbiAgICAgIGNhbWVyYS54ID0gcG9zaXRpb24ueDtcclxuICAgICAgY2FtZXJhLnkgPSBwb3NpdGlvbi55O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8g5omn6KGM55u45py656e75Yqo5Ye95pWwXHJcbiAgICAgIGNhbWVyYS5tb3ZlbWVudCAmJiBjYW1lcmEubW92ZW1lbnQoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiuoeeul+i+ueeVjOmXrumimFxyXG4gICAqIEBwYXJhbSB7U3ByaXRlfSBzcHJpdGUgXHJcbiAgICovXHJcbiAgZnVuY3Rpb24gYm9yZGVyQ2FsKHNwcml0ZSkge1xyXG4gICAgY29uc3QgeyB4OiB1eCwgeTogdXksIHdpZHRoOiB1dywgaGVpZ2h0OiB1aCB9ID0gc3ByaXRlO1xyXG4gICAgY29uc3QgeyB3aWR0aDogc3csIGhlaWdodDogc2ggfSA9IHN0YWdlO1xyXG4gICAgY29uc3QgeyB3aWR0aDogZ3csIGhlaWdodDogZ2ggfSA9IEdhbWU7XHJcbiAgICBsZXQgeCwgeTtcclxuXHJcbiAgICAvLyDnm7jmnLrlpITkuo7oiJ7lj7Dlrr3luqbojIPlm7TlhoXmiY3kvJrot5/pmo/ljZXkvY145Y+Y5YyW77yM5ZCm5YiZ5Zu65a6a5YC8XHJcbiAgICBpZiAodXggPCAoZ3cgLSB1dykgLyAyKSB7XHJcbiAgICAgIHggPSAwO1xyXG4gICAgfSBlbHNlIGlmICh1eCA+IHN3IC0gKGd3ICsgdXcpIC8gMikge1xyXG4gICAgICB4ID0gc3cgLSBndztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHggPSB1eCAtIChndyAtIHV3KSAvIDI7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g55u45py65aSE5LqO6Iie5Y+w6auY5bqm6IyD5Zu05YaF5omN5Lya6Lef6ZqP5Y2V5L2NeOWPmOWMlu+8jOWQpuWImeWbuuWumuWAvFxyXG4gICAgaWYgKHV5IDwgKGdoIC0gdWgpIC8gMikge1xyXG4gICAgICB5ID0gMDtcclxuICAgIH0gZWxzZSBpZiAodXkgPiBzaCAtIChnaCArIHVoKSAvIDIpIHtcclxuICAgICAgeSA9IHNoIC0gZ2g7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB5ID0gdXkgLSAoZ2ggLSB1aCkgLyAyO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IHgsIHkgfTtcclxuICB9XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICAvKipcclxuICAgICAqIOmVnOWktOi3n+maj1xyXG4gICAgICogQHBhcmFtIHtTcHJpdGV9IHNwcml0ZSBcclxuICAgICAqL1xyXG4gICAgZm9sbG93KHNwcml0ZSkge1xyXG4gICAgICBpZiAoc3ByaXRlID09PSBjYW1lcmEuZm9sbG93KSByZXR1cm47XHJcbiAgICAgIGNhbWVyYS5mb2xsb3cgPSBzcHJpdGU7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiDmm7TmlrDplZzlpLTmlbDmja5cclxuICAgICAqL1xyXG4gICAgdXBkYXRlKCkge1xyXG4gICAgICAvLyDorqHnrpfplZzlpLTmlbDmja5cclxuICAgICAgY2FtZXJhQ2FsKCk7XHJcbiAgICAgIC8vIOi/lOWbnumVnOWktOaVsOaNrlxyXG4gICAgICByZXR1cm4gY2FtZXJhO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICog6ZWc5aS056e75YqoXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IFxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHRpbWUgXHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBcclxuICAgICAqL1xyXG4gICAgbW92ZSh4LCB5LCB0aW1lLCBjYWxsYmFjaykge1xyXG4gICAgICBjcmVhdGVNb3ZlbWVudCh4LCB5LCB0aW1lLCBjYWxsYmFjayk7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiDplZzlpLTnp7vliqjliLDljZXkvY1cclxuICAgICAqIEBwYXJhbSB7U3ByaXRlfSBzcHJpdGUgXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdGltZSBcclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIFxyXG4gICAgICovXHJcbiAgICBtb3ZlVG8oc3ByaXRlLCB0aW1lLCBjYWxsYmFjaykge1xyXG4gICAgICAvLyDovrnnlYzorqHnrpdcclxuICAgICAgbGV0IHsgeCwgeSB9ID0gYm9yZGVyQ2FsKHNwcml0ZSk7XHJcblxyXG4gICAgICBjcmVhdGVNb3ZlbWVudCgoeCAtIGNhbWVyYS54KSwgKHkgLSBjYW1lcmEueSksIHRpbWUsIGNhbGxiYWNrKTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIOino+mZpOi3n+maj1xyXG4gICAgICovXHJcbiAgICB1bkZvbGxvdygpIHtcclxuICAgICAgY2FtZXJhLmZvbGxvdyA9IG51bGw7XHJcbiAgICB9XHJcbiAgfTtcclxufSJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/Stage/Camera.js\n");

/***/ }),

/***/ "./src/Stage/Geometry.js":
/*!*******************************!*\
  !*** ./src/Stage/Geometry.js ***!
  \*******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return geometry; });\nfunction geometry() {\r\n  function getData(unit1, unit2) {\r\n    const { x: x1, y: y1, width: w1, height: h1 } = unit1;\r\n    const { x: x2, y: y2, width: w2, height: h2 } = unit2;\r\n\r\n    return { x1, y1, w1, h1, x2, y2, w2, h2 };\r\n  }\r\n  return {\r\n    // 在上面\r\n    above(unit1, unit2) {\r\n      const { x1, y1, w1, h1, x2, y2, w2 } = getData(unit1, unit2);\r\n\r\n      if (y1 + h1 <= y2 && x1 + w1 >= x2 && x1 <= x2 + w2) {\r\n        return true;\r\n      }\r\n      return false;\r\n    },\r\n    // 包含\r\n    contain(unit1, unit2) {\r\n      const { x1, y1, w1, h1, x2, y2, w2, h2 } = getData(unit1, unit2);\r\n\r\n      if (w1 < w2 && h1 < h2 &&\r\n        (x1 <= x2 || x1 + w1 >= x2 + w2) &&\r\n        (y1 <= y2 || y1 + h1 >= y2 + h2)) {\r\n        return false;\r\n      }\r\n      return true;\r\n    },\r\n    // 距离()\r\n    distance(type, unit1, unit2) {\r\n      const { x1, y1, w1, h1, x2, y2, w2, h2 } = getData(unit1, unit2);\r\n      // 纵向距离\r\n      if (type === 'y') {\r\n        if (y2 > y1 + h1) {\r\n          return y2 - (y1 + h1);\r\n        } else if (y1 > y2 + h2) {\r\n          return y1 - (y2 + h2);\r\n        } else {\r\n          return 0;\r\n        }\r\n      }\r\n      // 横向距离\r\n      if (type === 'x') {\r\n        if (x2 > x1 + w1) {\r\n          return x2 - (x1 + w1);\r\n        } else if (x1 > x2 + w2) {\r\n          return x1 - (x2 + w2);\r\n        } else {\r\n          return 0;\r\n        }\r\n      }\r\n      // 中心距离\r\n      if (type === \"o\") {\r\n        const o1 = [x1 + w1 / 2, y1 + h1 / 2];\r\n        const o2 = [x2 + w2 / 2, y2 + h2 / 2];\r\n        return Math.sqrt((o1[0] - o2[0]) ** 2 + (o1[1] - o2[1]) ** 2);\r\n      }\r\n    },\r\n    // 相交\r\n    intersect(unit1, unit2) {\r\n      const { x1, y1, w1, h1, x2, y2, w2, h2 } = getData(unit1, unit2);\r\n\r\n      if (x1 >= x2 + w2 ||\r\n        x1 + w1 <= x2 ||\r\n        y1 >= y2 + h2 ||\r\n        y1 + h1 <= y2) {\r\n        return false;\r\n      }\r\n      return true;\r\n    },\r\n    // 在右边\r\n    onRight(unit1, unit2) {\r\n      const { x1, y1, h1, x2, y2, w2, h2 } = getData(unit1, unit2);\r\n\r\n      if (x1 >= x2 + w2 && y1 + h1 >= y2 && y1 <= y2 + h2) {\r\n        return true;\r\n      }\r\n      return false;\r\n    },\r\n    // 在左边\r\n    onLeft(unit1, unit2) {\r\n      const { x1, y1, w1, h1, x2, y2, h2 } = getData(unit1, unit2);\r\n\r\n      if (x1 + w1 <= x2 && y1 + h1 >= y2 && y1 <= y2 + h2) {\r\n        return true;\r\n      }\r\n      return false;\r\n    },\r\n    // 相切\r\n    tangent(unit1, unit2) {\r\n      const { x1, y1, w1, h1, x2, y2, w2, h2 } = getData(unit1, unit2);\r\n\r\n      if (x1 > x2 + w2 ||\r\n        x1 + w1 < x2 ||\r\n        y1 > y2 + h2 ||\r\n        y1 + h1 < y2) {\r\n        return false;\r\n      }\r\n      return true;\r\n    },\r\n    // 在下面\r\n    under(unit1, unit2) {\r\n      const { x1, y1, w1, x2, y2, w2, h2 } = getData(unit1, unit2);\r\n\r\n      if (y1 >= y2 + h2 && x1 + w1 >= x2 && x1 <= x2 + w2) {\r\n        return true;\r\n      }\r\n      return false;\r\n    }\r\n  };\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvU3RhZ2UvR2VvbWV0cnkuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvU3RhZ2UvR2VvbWV0cnkuanM/NWI0ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZW9tZXRyeSgpIHtcclxuICBmdW5jdGlvbiBnZXREYXRhKHVuaXQxLCB1bml0Mikge1xyXG4gICAgY29uc3QgeyB4OiB4MSwgeTogeTEsIHdpZHRoOiB3MSwgaGVpZ2h0OiBoMSB9ID0gdW5pdDE7XHJcbiAgICBjb25zdCB7IHg6IHgyLCB5OiB5Miwgd2lkdGg6IHcyLCBoZWlnaHQ6IGgyIH0gPSB1bml0MjtcclxuXHJcbiAgICByZXR1cm4geyB4MSwgeTEsIHcxLCBoMSwgeDIsIHkyLCB3MiwgaDIgfTtcclxuICB9XHJcbiAgcmV0dXJuIHtcclxuICAgIC8vIOWcqOS4iumdolxyXG4gICAgYWJvdmUodW5pdDEsIHVuaXQyKSB7XHJcbiAgICAgIGNvbnN0IHsgeDEsIHkxLCB3MSwgaDEsIHgyLCB5MiwgdzIgfSA9IGdldERhdGEodW5pdDEsIHVuaXQyKTtcclxuXHJcbiAgICAgIGlmICh5MSArIGgxIDw9IHkyICYmIHgxICsgdzEgPj0geDIgJiYgeDEgPD0geDIgKyB3Mikge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0sXHJcbiAgICAvLyDljIXlkKtcclxuICAgIGNvbnRhaW4odW5pdDEsIHVuaXQyKSB7XHJcbiAgICAgIGNvbnN0IHsgeDEsIHkxLCB3MSwgaDEsIHgyLCB5MiwgdzIsIGgyIH0gPSBnZXREYXRhKHVuaXQxLCB1bml0Mik7XHJcblxyXG4gICAgICBpZiAodzEgPCB3MiAmJiBoMSA8IGgyICYmXHJcbiAgICAgICAgKHgxIDw9IHgyIHx8IHgxICsgdzEgPj0geDIgKyB3MikgJiZcclxuICAgICAgICAoeTEgPD0geTIgfHwgeTEgKyBoMSA+PSB5MiArIGgyKSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0sXHJcbiAgICAvLyDot53nprsoKVxyXG4gICAgZGlzdGFuY2UodHlwZSwgdW5pdDEsIHVuaXQyKSB7XHJcbiAgICAgIGNvbnN0IHsgeDEsIHkxLCB3MSwgaDEsIHgyLCB5MiwgdzIsIGgyIH0gPSBnZXREYXRhKHVuaXQxLCB1bml0Mik7XHJcbiAgICAgIC8vIOe6teWQkei3neemu1xyXG4gICAgICBpZiAodHlwZSA9PT0gJ3knKSB7XHJcbiAgICAgICAgaWYgKHkyID4geTEgKyBoMSkge1xyXG4gICAgICAgICAgcmV0dXJuIHkyIC0gKHkxICsgaDEpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoeTEgPiB5MiArIGgyKSB7XHJcbiAgICAgICAgICByZXR1cm4geTEgLSAoeTIgKyBoMik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICAvLyDmqKrlkJHot53nprtcclxuICAgICAgaWYgKHR5cGUgPT09ICd4Jykge1xyXG4gICAgICAgIGlmICh4MiA+IHgxICsgdzEpIHtcclxuICAgICAgICAgIHJldHVybiB4MiAtICh4MSArIHcxKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHgxID4geDIgKyB3Mikge1xyXG4gICAgICAgICAgcmV0dXJuIHgxIC0gKHgyICsgdzIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgLy8g5Lit5b+D6Led56a7XHJcbiAgICAgIGlmICh0eXBlID09PSBcIm9cIikge1xyXG4gICAgICAgIGNvbnN0IG8xID0gW3gxICsgdzEgLyAyLCB5MSArIGgxIC8gMl07XHJcbiAgICAgICAgY29uc3QgbzIgPSBbeDIgKyB3MiAvIDIsIHkyICsgaDIgLyAyXTtcclxuICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KChvMVswXSAtIG8yWzBdKSAqKiAyICsgKG8xWzFdIC0gbzJbMV0pICoqIDIpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy8g55u45LqkXHJcbiAgICBpbnRlcnNlY3QodW5pdDEsIHVuaXQyKSB7XHJcbiAgICAgIGNvbnN0IHsgeDEsIHkxLCB3MSwgaDEsIHgyLCB5MiwgdzIsIGgyIH0gPSBnZXREYXRhKHVuaXQxLCB1bml0Mik7XHJcblxyXG4gICAgICBpZiAoeDEgPj0geDIgKyB3MiB8fFxyXG4gICAgICAgIHgxICsgdzEgPD0geDIgfHxcclxuICAgICAgICB5MSA+PSB5MiArIGgyIHx8XHJcbiAgICAgICAgeTEgKyBoMSA8PSB5Mikge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0sXHJcbiAgICAvLyDlnKjlj7PovrlcclxuICAgIG9uUmlnaHQodW5pdDEsIHVuaXQyKSB7XHJcbiAgICAgIGNvbnN0IHsgeDEsIHkxLCBoMSwgeDIsIHkyLCB3MiwgaDIgfSA9IGdldERhdGEodW5pdDEsIHVuaXQyKTtcclxuXHJcbiAgICAgIGlmICh4MSA+PSB4MiArIHcyICYmIHkxICsgaDEgPj0geTIgJiYgeTEgPD0geTIgKyBoMikge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0sXHJcbiAgICAvLyDlnKjlt6bovrlcclxuICAgIG9uTGVmdCh1bml0MSwgdW5pdDIpIHtcclxuICAgICAgY29uc3QgeyB4MSwgeTEsIHcxLCBoMSwgeDIsIHkyLCBoMiB9ID0gZ2V0RGF0YSh1bml0MSwgdW5pdDIpO1xyXG5cclxuICAgICAgaWYgKHgxICsgdzEgPD0geDIgJiYgeTEgKyBoMSA+PSB5MiAmJiB5MSA8PSB5MiArIGgyKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSxcclxuICAgIC8vIOebuOWIh1xyXG4gICAgdGFuZ2VudCh1bml0MSwgdW5pdDIpIHtcclxuICAgICAgY29uc3QgeyB4MSwgeTEsIHcxLCBoMSwgeDIsIHkyLCB3MiwgaDIgfSA9IGdldERhdGEodW5pdDEsIHVuaXQyKTtcclxuXHJcbiAgICAgIGlmICh4MSA+IHgyICsgdzIgfHxcclxuICAgICAgICB4MSArIHcxIDwgeDIgfHxcclxuICAgICAgICB5MSA+IHkyICsgaDIgfHxcclxuICAgICAgICB5MSArIGgxIDwgeTIpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9LFxyXG4gICAgLy8g5Zyo5LiL6Z2iXHJcbiAgICB1bmRlcih1bml0MSwgdW5pdDIpIHtcclxuICAgICAgY29uc3QgeyB4MSwgeTEsIHcxLCB4MiwgeTIsIHcyLCBoMiB9ID0gZ2V0RGF0YSh1bml0MSwgdW5pdDIpO1xyXG5cclxuICAgICAgaWYgKHkxID49IHkyICsgaDIgJiYgeDEgKyB3MSA+PSB4MiAmJiB4MSA8PSB4MiArIHcyKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH07XHJcbn0iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/Stage/Geometry.js\n");

/***/ }),

/***/ "./src/Stage/Sprite.js":
/*!*****************************!*\
  !*** ./src/Stage/Sprite.js ***!
  \*****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return sprite; });\n/* harmony import */ var _Game_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Game/index.js */ \"./src/Game/index.js\");\n/* harmony import */ var _Sprite_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Sprite/index.js */ \"./src/Sprite/index.js\");\n\r\n\r\n\r\nlet spritesCache = {}\r\n\r\nfunction sprite(stage) {\r\n  let sprites = Object.assign({}, spritesCache);\r\n  // 图层数组\r\n  let layers = [];\r\n  // 检测id是否存在\r\n  function checkId(id) {\r\n    if (sprites[id]) throw new Error(`Sprite '${id}' exists.`);\r\n  }\r\n  // 将精灵排序\r\n  function spritesSort() {\r\n    let newSprites = {};\r\n    // 根据图层值排序\r\n    layers.forEach(layer => {\r\n      for (const key in sprites) {\r\n        const sprite = sprites[key];\r\n        if (sprite.layer === layer) {\r\n          newSprites[sprite.id] = sprite;\r\n        }\r\n      }\r\n    })\r\n    sprites = newSprites;\r\n  }\r\n  // 添加game和stage属性\r\n  function addProperty(newSprite) {\r\n    // Game和Stage的宽高\r\n    newSprite.game = {\r\n      width: _Game_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].width,\r\n      height: _Game_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].height\r\n    };\r\n    // 全局精灵无法使用stage属性\r\n    if (newSprite.global) return;\r\n    newSprite.stage = {\r\n      width: stage.width,\r\n      height: stage.height\r\n    };\r\n  }\r\n  // 检查图层值\r\n  function checkLayer(layer) {\r\n    // 检测图层值是否在数组中\r\n    if (layers.indexOf(layer) > -1) return;\r\n    // 新增图层值\r\n    layers.push(layer);\r\n    // 图层值排序\r\n    layers.sort();\r\n  }\r\n  return {\r\n    /**\r\n     * 添加新精灵\r\n     * @param {Sprite} newSprite \r\n     */\r\n    add(newSprite) {\r\n      checkId(newSprite.id);\r\n      sprites[newSprite.id] = newSprite;\r\n      addProperty(newSprite);\r\n      checkLayer(newSprite.layer);\r\n      spritesSort();\r\n      return newSprite;\r\n    },\r\n    /**\r\n     * 删除精灵\r\n     * @param {string} id 精灵id\r\n     */\r\n    del(id) {\r\n      var _sprite = sprites[id];\r\n      if (!_sprite) throw new Error(`sprite ${id} doesn't exist`);\r\n      _sprite.beforeDestroy && _sprite.beforeDestroy();\r\n      delete _Game_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].inputEvents[id];\r\n      _sprite.audio.clear();\r\n      delete sprites[id];\r\n      _sprite.destroyed && _sprite.destroyed();\r\n    },\r\n    /**\r\n     * 删除所有精灵\r\n     * @param {boolean} includeGlobal 是否包括全局精灵\r\n     */\r\n    clear(includeGlobal) {\r\n      for (var key in sprites) {\r\n        var _sprite = sprites[key];\r\n        if (!includeGlobal && _sprite.global) {\r\n          spritesCache[key] = _sprite;\r\n          continue;\r\n        };\r\n        this.del(key);\r\n      }\r\n    },\r\n    /**\r\n     * 查找精灵\r\n     * @param {string} id \r\n     */\r\n    find(id) {\r\n      return sprites[id];\r\n    },\r\n    /**\r\n     * 过滤符合条件的精灵(类似Array.prototype.filter)\r\n     * @param {Function} callback \r\n     */\r\n    filter(callback) {\r\n      let newSprites = {};\r\n\r\n      for (const key in sprites) {\r\n        const _sprite = sprites[key];\r\n        if (callback(_sprite) === false) continue;\r\n        newSprites[key] = _sprite;\r\n      }\r\n\r\n      return newSprites;\r\n    },\r\n    /**\r\n     * 遍历精灵并执行回调函数(类似Array.prototype.forEach)\r\n     * @param {Function} callback \r\n     */\r\n    travel(callback) {\r\n      for (var key in sprites) {\r\n        // 回调函数返回false时停止遍历\r\n        if (callback(sprites[key]) === false) break;\r\n      }\r\n    },\r\n  }\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvU3RhZ2UvU3ByaXRlLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL1N0YWdlL1Nwcml0ZS5qcz9mZWQwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBHYW1lIGZyb20gJy4uL0dhbWUvaW5kZXguanMnXHJcbmltcG9ydCBTcHJpdGUgZnJvbSAnLi4vU3ByaXRlL2luZGV4LmpzJztcclxuXHJcbmxldCBzcHJpdGVzQ2FjaGUgPSB7fVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc3ByaXRlKHN0YWdlKSB7XHJcbiAgbGV0IHNwcml0ZXMgPSBPYmplY3QuYXNzaWduKHt9LCBzcHJpdGVzQ2FjaGUpO1xyXG4gIC8vIOWbvuWxguaVsOe7hFxyXG4gIGxldCBsYXllcnMgPSBbXTtcclxuICAvLyDmo4DmtYtpZOaYr+WQpuWtmOWcqFxyXG4gIGZ1bmN0aW9uIGNoZWNrSWQoaWQpIHtcclxuICAgIGlmIChzcHJpdGVzW2lkXSkgdGhyb3cgbmV3IEVycm9yKGBTcHJpdGUgJyR7aWR9JyBleGlzdHMuYCk7XHJcbiAgfVxyXG4gIC8vIOWwhueyvueBteaOkuW6j1xyXG4gIGZ1bmN0aW9uIHNwcml0ZXNTb3J0KCkge1xyXG4gICAgbGV0IG5ld1Nwcml0ZXMgPSB7fTtcclxuICAgIC8vIOagueaNruWbvuWxguWAvOaOkuW6j1xyXG4gICAgbGF5ZXJzLmZvckVhY2gobGF5ZXIgPT4ge1xyXG4gICAgICBmb3IgKGNvbnN0IGtleSBpbiBzcHJpdGVzKSB7XHJcbiAgICAgICAgY29uc3Qgc3ByaXRlID0gc3ByaXRlc1trZXldO1xyXG4gICAgICAgIGlmIChzcHJpdGUubGF5ZXIgPT09IGxheWVyKSB7XHJcbiAgICAgICAgICBuZXdTcHJpdGVzW3Nwcml0ZS5pZF0gPSBzcHJpdGU7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gICAgc3ByaXRlcyA9IG5ld1Nwcml0ZXM7XHJcbiAgfVxyXG4gIC8vIOa3u+WKoGdhbWXlkoxzdGFnZeWxnuaAp1xyXG4gIGZ1bmN0aW9uIGFkZFByb3BlcnR5KG5ld1Nwcml0ZSkge1xyXG4gICAgLy8gR2FtZeWSjFN0YWdl55qE5a696auYXHJcbiAgICBuZXdTcHJpdGUuZ2FtZSA9IHtcclxuICAgICAgd2lkdGg6IEdhbWUud2lkdGgsXHJcbiAgICAgIGhlaWdodDogR2FtZS5oZWlnaHRcclxuICAgIH07XHJcbiAgICAvLyDlhajlsYDnsr7ngbXml6Dms5Xkvb/nlKhzdGFnZeWxnuaAp1xyXG4gICAgaWYgKG5ld1Nwcml0ZS5nbG9iYWwpIHJldHVybjtcclxuICAgIG5ld1Nwcml0ZS5zdGFnZSA9IHtcclxuICAgICAgd2lkdGg6IHN0YWdlLndpZHRoLFxyXG4gICAgICBoZWlnaHQ6IHN0YWdlLmhlaWdodFxyXG4gICAgfTtcclxuICB9XHJcbiAgLy8g5qOA5p+l5Zu+5bGC5YC8XHJcbiAgZnVuY3Rpb24gY2hlY2tMYXllcihsYXllcikge1xyXG4gICAgLy8g5qOA5rWL5Zu+5bGC5YC85piv5ZCm5Zyo5pWw57uE5LitXHJcbiAgICBpZiAobGF5ZXJzLmluZGV4T2YobGF5ZXIpID4gLTEpIHJldHVybjtcclxuICAgIC8vIOaWsOWinuWbvuWxguWAvFxyXG4gICAgbGF5ZXJzLnB1c2gobGF5ZXIpO1xyXG4gICAgLy8g5Zu+5bGC5YC85o6S5bqPXHJcbiAgICBsYXllcnMuc29ydCgpO1xyXG4gIH1cclxuICByZXR1cm4ge1xyXG4gICAgLyoqXHJcbiAgICAgKiDmt7vliqDmlrDnsr7ngbVcclxuICAgICAqIEBwYXJhbSB7U3ByaXRlfSBuZXdTcHJpdGUgXHJcbiAgICAgKi9cclxuICAgIGFkZChuZXdTcHJpdGUpIHtcclxuICAgICAgY2hlY2tJZChuZXdTcHJpdGUuaWQpO1xyXG4gICAgICBzcHJpdGVzW25ld1Nwcml0ZS5pZF0gPSBuZXdTcHJpdGU7XHJcbiAgICAgIGFkZFByb3BlcnR5KG5ld1Nwcml0ZSk7XHJcbiAgICAgIGNoZWNrTGF5ZXIobmV3U3ByaXRlLmxheWVyKTtcclxuICAgICAgc3ByaXRlc1NvcnQoKTtcclxuICAgICAgcmV0dXJuIG5ld1Nwcml0ZTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIOWIoOmZpOeyvueBtVxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGlkIOeyvueBtWlkXHJcbiAgICAgKi9cclxuICAgIGRlbChpZCkge1xyXG4gICAgICB2YXIgX3Nwcml0ZSA9IHNwcml0ZXNbaWRdO1xyXG4gICAgICBpZiAoIV9zcHJpdGUpIHRocm93IG5ldyBFcnJvcihgc3ByaXRlICR7aWR9IGRvZXNuJ3QgZXhpc3RgKTtcclxuICAgICAgX3Nwcml0ZS5iZWZvcmVEZXN0cm95ICYmIF9zcHJpdGUuYmVmb3JlRGVzdHJveSgpO1xyXG4gICAgICBkZWxldGUgR2FtZS5pbnB1dEV2ZW50c1tpZF07XHJcbiAgICAgIF9zcHJpdGUuYXVkaW8uY2xlYXIoKTtcclxuICAgICAgZGVsZXRlIHNwcml0ZXNbaWRdO1xyXG4gICAgICBfc3ByaXRlLmRlc3Ryb3llZCAmJiBfc3ByaXRlLmRlc3Ryb3llZCgpO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICog5Yig6Zmk5omA5pyJ57K+54G1XHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGluY2x1ZGVHbG9iYWwg5piv5ZCm5YyF5ous5YWo5bGA57K+54G1XHJcbiAgICAgKi9cclxuICAgIGNsZWFyKGluY2x1ZGVHbG9iYWwpIHtcclxuICAgICAgZm9yICh2YXIga2V5IGluIHNwcml0ZXMpIHtcclxuICAgICAgICB2YXIgX3Nwcml0ZSA9IHNwcml0ZXNba2V5XTtcclxuICAgICAgICBpZiAoIWluY2x1ZGVHbG9iYWwgJiYgX3Nwcml0ZS5nbG9iYWwpIHtcclxuICAgICAgICAgIHNwcml0ZXNDYWNoZVtrZXldID0gX3Nwcml0ZTtcclxuICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5kZWwoa2V5KTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICog5p+l5om+57K+54G1XHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgXHJcbiAgICAgKi9cclxuICAgIGZpbmQoaWQpIHtcclxuICAgICAgcmV0dXJuIHNwcml0ZXNbaWRdO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICog6L+H5ruk56ym5ZCI5p2h5Lu255qE57K+54G1KOexu+S8vEFycmF5LnByb3RvdHlwZS5maWx0ZXIpXHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBcclxuICAgICAqL1xyXG4gICAgZmlsdGVyKGNhbGxiYWNrKSB7XHJcbiAgICAgIGxldCBuZXdTcHJpdGVzID0ge307XHJcblxyXG4gICAgICBmb3IgKGNvbnN0IGtleSBpbiBzcHJpdGVzKSB7XHJcbiAgICAgICAgY29uc3QgX3Nwcml0ZSA9IHNwcml0ZXNba2V5XTtcclxuICAgICAgICBpZiAoY2FsbGJhY2soX3Nwcml0ZSkgPT09IGZhbHNlKSBjb250aW51ZTtcclxuICAgICAgICBuZXdTcHJpdGVzW2tleV0gPSBfc3ByaXRlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gbmV3U3ByaXRlcztcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIOmBjeWOhueyvueBteW5tuaJp+ihjOWbnuiwg+WHveaVsCjnsbvkvLxBcnJheS5wcm90b3R5cGUuZm9yRWFjaClcclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIFxyXG4gICAgICovXHJcbiAgICB0cmF2ZWwoY2FsbGJhY2spIHtcclxuICAgICAgZm9yICh2YXIga2V5IGluIHNwcml0ZXMpIHtcclxuICAgICAgICAvLyDlm57osIPlh73mlbDov5Tlm55mYWxzZeaXtuWBnOatoumBjeWOhlxyXG4gICAgICAgIGlmIChjYWxsYmFjayhzcHJpdGVzW2tleV0pID09PSBmYWxzZSkgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgfVxyXG59Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/Stage/Sprite.js\n");

/***/ }),

/***/ "./src/Stage/index.js":
/*!****************************!*\
  !*** ./src/Stage/index.js ***!
  \****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Game_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Game/index.js */ \"./src/Game/index.js\");\n/* harmony import */ var _Sprite_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Sprite.js */ \"./src/Stage/Sprite.js\");\n/* harmony import */ var _Camera_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Camera.js */ \"./src/Stage/Camera.js\");\n/* harmony import */ var _Common_Event_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Common/Event.js */ \"./src/Common/Event.js\");\n/* harmony import */ var _Geometry_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Geometry.js */ \"./src/Stage/Geometry.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * 场景构造函数\r\n * @param {Object} options\r\n */\r\nclass Stage {\r\n  constructor(options) {\r\n    _Game_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].asset.onReady(() => {\r\n      // 销毁场景\r\n      _Game_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].stage && _Game_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].stage.destory();\r\n\r\n      // 初始化生命周期函数\r\n      this.beforeCreate = options.beforeCreate;\r\n      this.created = options.created;\r\n      this.beforeUpdate = options.beforeUpdate;\r\n      this.updated = options.updated;\r\n      this.beforeDestroy = options.beforeDestroy;\r\n      this.destoryed = options.destoryed;\r\n\r\n      // 创建前函数\r\n      this.beforeCreate && this.beforeCreate();\r\n\r\n      // 清空按键\r\n      _Game_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].key = null;\r\n\r\n      // 改变当前场景\r\n      _Game_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].stage = this;\r\n\r\n      // 初始化场景数据\r\n      var config = options.config;\r\n      this.width = (config && config.width) || _Game_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].width;\r\n      this.height = (config && config.height) || _Game_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].height;\r\n      this.stop = false;\r\n\r\n      // 初始化实例方法\r\n      this.sprite = Object(_Sprite_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(this);\r\n      this.camera = Object(_Camera_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(this);\r\n      this.event = Object(_Common_Event_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(this);\r\n      this.geometry = Object(_Geometry_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"])();\r\n\r\n      // 混入\r\n      if (Stage.mixins) {\r\n        Stage.mixins.forEach(function (mixin) {\r\n          mixin.call(this);\r\n        });\r\n      }\r\n\r\n      // 创建后函数\r\n      this.created && this.created.call(this);\r\n\r\n      // 进入循环\r\n      loop(this);\r\n    });\r\n  }\r\n\r\n  /**\r\n  * 场景销毁\r\n  */\r\n  destory() {\r\n    // 销毁前函数\r\n    this.beforeDestroy && this.beforeDestroy();\r\n\r\n    // 退出循环\r\n    this.stop = true;\r\n\r\n    // 清空场景单位\r\n    _Game_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].sprite.clear();\r\n\r\n    // 销毁后函数\r\n    this.destoryed && this.destoryed();\r\n  }\r\n}\r\n\r\n/**\r\n * 场景循环\r\n * @param {Stage} stage \r\n */\r\nfunction loop(stage) {\r\n  if (stage.stop) return;\r\n\r\n  // 更新前函数\r\n  stage.beforeUpdate && stage.beforeUpdate();\r\n\r\n  // 获取镜头数据\r\n  var camera = stage.camera.update();\r\n\r\n  // 执行游戏事件\r\n  _Game_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].event.execute();\r\n\r\n  // 执行场景事件\r\n  stage.event.execute();\r\n\r\n  // 清除canvas\r\n  _Game_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].context.clearRect(0, 0, _Game_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].width, _Game_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].height);\r\n\r\n  // 执行单位渲染和事件\r\n  stage.sprite.travel(sprite => {\r\n    unitExecute(sprite, camera);\r\n  })\r\n\r\n  // 更新后函数\r\n  stage.updated && stage.updated();\r\n\r\n  // 刷新画布\r\n  window.requestAnimationFrame(() => loop(stage));\r\n}\r\n\r\n/**\r\n * 执行单位渲染和事件\r\n * @param {Sprite} sprite \r\n * @param {Object} camera \r\n */\r\nfunction unitExecute(sprite, camera) {\r\n  // 更新前函数\r\n  sprite.beforeUpdate && sprite.beforeUpdate();\r\n  // 计算相对位置\r\n  sprite.relX = sprite.x - camera.x * (1 - sprite.fixed);\r\n  sprite.relY = sprite.y - camera.y * (1 - sprite.fixed);\r\n  // 更新音频\r\n  sprite.audio.update();\r\n  // 绘制画面\r\n  sprite.graphics.render();\r\n  // 执行事件\r\n  sprite.event.execute();\r\n  // 更新后函数\r\n  sprite.updated && sprite.updated();\r\n}\r\n\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (Stage);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvU3RhZ2UvaW5kZXguanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvU3RhZ2UvaW5kZXguanM/OWMyYyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIlxyXG5pbXBvcnQgR2FtZSBmcm9tIFwiLi4vR2FtZS9pbmRleC5qc1wiO1xyXG5pbXBvcnQgc3ByaXRlIGZyb20gXCIuL1Nwcml0ZS5qc1wiO1xyXG5pbXBvcnQgY2FtZXJhIGZyb20gXCIuL0NhbWVyYS5qc1wiO1xyXG5pbXBvcnQgZXZlbnQgZnJvbSBcIi4uL0NvbW1vbi9FdmVudC5qc1wiO1xyXG5pbXBvcnQgZ2VvbWV0cnkgZnJvbSBcIi4vR2VvbWV0cnkuanNcIjtcclxuXHJcbi8qKlxyXG4gKiDlnLrmma/mnoTpgKDlh73mlbBcclxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcclxuICovXHJcbmNsYXNzIFN0YWdlIHtcclxuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XHJcbiAgICBHYW1lLmFzc2V0Lm9uUmVhZHkoKCkgPT4ge1xyXG4gICAgICAvLyDplIDmr4HlnLrmma9cclxuICAgICAgR2FtZS5zdGFnZSAmJiBHYW1lLnN0YWdlLmRlc3RvcnkoKTtcclxuXHJcbiAgICAgIC8vIOWIneWni+WMlueUn+WRveWRqOacn+WHveaVsFxyXG4gICAgICB0aGlzLmJlZm9yZUNyZWF0ZSA9IG9wdGlvbnMuYmVmb3JlQ3JlYXRlO1xyXG4gICAgICB0aGlzLmNyZWF0ZWQgPSBvcHRpb25zLmNyZWF0ZWQ7XHJcbiAgICAgIHRoaXMuYmVmb3JlVXBkYXRlID0gb3B0aW9ucy5iZWZvcmVVcGRhdGU7XHJcbiAgICAgIHRoaXMudXBkYXRlZCA9IG9wdGlvbnMudXBkYXRlZDtcclxuICAgICAgdGhpcy5iZWZvcmVEZXN0cm95ID0gb3B0aW9ucy5iZWZvcmVEZXN0cm95O1xyXG4gICAgICB0aGlzLmRlc3RvcnllZCA9IG9wdGlvbnMuZGVzdG9yeWVkO1xyXG5cclxuICAgICAgLy8g5Yib5bu65YmN5Ye95pWwXHJcbiAgICAgIHRoaXMuYmVmb3JlQ3JlYXRlICYmIHRoaXMuYmVmb3JlQ3JlYXRlKCk7XHJcblxyXG4gICAgICAvLyDmuIXnqbrmjInplK5cclxuICAgICAgR2FtZS5rZXkgPSBudWxsO1xyXG5cclxuICAgICAgLy8g5pS55Y+Y5b2T5YmN5Zy65pmvXHJcbiAgICAgIEdhbWUuc3RhZ2UgPSB0aGlzO1xyXG5cclxuICAgICAgLy8g5Yid5aeL5YyW5Zy65pmv5pWw5o2uXHJcbiAgICAgIHZhciBjb25maWcgPSBvcHRpb25zLmNvbmZpZztcclxuICAgICAgdGhpcy53aWR0aCA9IChjb25maWcgJiYgY29uZmlnLndpZHRoKSB8fCBHYW1lLndpZHRoO1xyXG4gICAgICB0aGlzLmhlaWdodCA9IChjb25maWcgJiYgY29uZmlnLmhlaWdodCkgfHwgR2FtZS5oZWlnaHQ7XHJcbiAgICAgIHRoaXMuc3RvcCA9IGZhbHNlO1xyXG5cclxuICAgICAgLy8g5Yid5aeL5YyW5a6e5L6L5pa55rOVXHJcbiAgICAgIHRoaXMuc3ByaXRlID0gc3ByaXRlKHRoaXMpO1xyXG4gICAgICB0aGlzLmNhbWVyYSA9IGNhbWVyYSh0aGlzKTtcclxuICAgICAgdGhpcy5ldmVudCA9IGV2ZW50KHRoaXMpO1xyXG4gICAgICB0aGlzLmdlb21ldHJ5ID0gZ2VvbWV0cnkoKTtcclxuXHJcbiAgICAgIC8vIOa3t+WFpVxyXG4gICAgICBpZiAoU3RhZ2UubWl4aW5zKSB7XHJcbiAgICAgICAgU3RhZ2UubWl4aW5zLmZvckVhY2goZnVuY3Rpb24gKG1peGluKSB7XHJcbiAgICAgICAgICBtaXhpbi5jYWxsKHRoaXMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyDliJvlu7rlkI7lh73mlbBcclxuICAgICAgdGhpcy5jcmVhdGVkICYmIHRoaXMuY3JlYXRlZC5jYWxsKHRoaXMpO1xyXG5cclxuICAgICAgLy8g6L+b5YWl5b6q546vXHJcbiAgICAgIGxvb3AodGhpcyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICog5Zy65pmv6ZSA5q+BXHJcbiAgKi9cclxuICBkZXN0b3J5KCkge1xyXG4gICAgLy8g6ZSA5q+B5YmN5Ye95pWwXHJcbiAgICB0aGlzLmJlZm9yZURlc3Ryb3kgJiYgdGhpcy5iZWZvcmVEZXN0cm95KCk7XHJcblxyXG4gICAgLy8g6YCA5Ye65b6q546vXHJcbiAgICB0aGlzLnN0b3AgPSB0cnVlO1xyXG5cclxuICAgIC8vIOa4heepuuWcuuaZr+WNleS9jVxyXG4gICAgR2FtZS5zcHJpdGUuY2xlYXIoKTtcclxuXHJcbiAgICAvLyDplIDmr4HlkI7lh73mlbBcclxuICAgIHRoaXMuZGVzdG9yeWVkICYmIHRoaXMuZGVzdG9yeWVkKCk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICog5Zy65pmv5b6q546vXHJcbiAqIEBwYXJhbSB7U3RhZ2V9IHN0YWdlIFxyXG4gKi9cclxuZnVuY3Rpb24gbG9vcChzdGFnZSkge1xyXG4gIGlmIChzdGFnZS5zdG9wKSByZXR1cm47XHJcblxyXG4gIC8vIOabtOaWsOWJjeWHveaVsFxyXG4gIHN0YWdlLmJlZm9yZVVwZGF0ZSAmJiBzdGFnZS5iZWZvcmVVcGRhdGUoKTtcclxuXHJcbiAgLy8g6I635Y+W6ZWc5aS05pWw5o2uXHJcbiAgdmFyIGNhbWVyYSA9IHN0YWdlLmNhbWVyYS51cGRhdGUoKTtcclxuXHJcbiAgLy8g5omn6KGM5ri45oiP5LqL5Lu2XHJcbiAgR2FtZS5ldmVudC5leGVjdXRlKCk7XHJcblxyXG4gIC8vIOaJp+ihjOWcuuaZr+S6i+S7tlxyXG4gIHN0YWdlLmV2ZW50LmV4ZWN1dGUoKTtcclxuXHJcbiAgLy8g5riF6ZmkY2FudmFzXHJcbiAgR2FtZS5jb250ZXh0LmNsZWFyUmVjdCgwLCAwLCBHYW1lLndpZHRoLCBHYW1lLmhlaWdodCk7XHJcblxyXG4gIC8vIOaJp+ihjOWNleS9jea4suafk+WSjOS6i+S7tlxyXG4gIHN0YWdlLnNwcml0ZS50cmF2ZWwoc3ByaXRlID0+IHtcclxuICAgIHVuaXRFeGVjdXRlKHNwcml0ZSwgY2FtZXJhKTtcclxuICB9KVxyXG5cclxuICAvLyDmm7TmlrDlkI7lh73mlbBcclxuICBzdGFnZS51cGRhdGVkICYmIHN0YWdlLnVwZGF0ZWQoKTtcclxuXHJcbiAgLy8g5Yi35paw55S75biDXHJcbiAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiBsb29wKHN0YWdlKSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDmiafooYzljZXkvY3muLLmn5Plkozkuovku7ZcclxuICogQHBhcmFtIHtTcHJpdGV9IHNwcml0ZSBcclxuICogQHBhcmFtIHtPYmplY3R9IGNhbWVyYSBcclxuICovXHJcbmZ1bmN0aW9uIHVuaXRFeGVjdXRlKHNwcml0ZSwgY2FtZXJhKSB7XHJcbiAgLy8g5pu05paw5YmN5Ye95pWwXHJcbiAgc3ByaXRlLmJlZm9yZVVwZGF0ZSAmJiBzcHJpdGUuYmVmb3JlVXBkYXRlKCk7XHJcbiAgLy8g6K6h566X55u45a+55L2N572uXHJcbiAgc3ByaXRlLnJlbFggPSBzcHJpdGUueCAtIGNhbWVyYS54ICogKDEgLSBzcHJpdGUuZml4ZWQpO1xyXG4gIHNwcml0ZS5yZWxZID0gc3ByaXRlLnkgLSBjYW1lcmEueSAqICgxIC0gc3ByaXRlLmZpeGVkKTtcclxuICAvLyDmm7TmlrDpn7PpopFcclxuICBzcHJpdGUuYXVkaW8udXBkYXRlKCk7XHJcbiAgLy8g57uY5Yi255S76Z2iXHJcbiAgc3ByaXRlLmdyYXBoaWNzLnJlbmRlcigpO1xyXG4gIC8vIOaJp+ihjOS6i+S7tlxyXG4gIHNwcml0ZS5ldmVudC5leGVjdXRlKCk7XHJcbiAgLy8g5pu05paw5ZCO5Ye95pWwXHJcbiAgc3ByaXRlLnVwZGF0ZWQgJiYgc3ByaXRlLnVwZGF0ZWQoKTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgU3RhZ2UiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/Stage/index.js\n");

/***/ }),

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/*! exports provided: Game, Stage, Sprite */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Game_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Game/index.js */ \"./src/Game/index.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Game\", function() { return _Game_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]; });\n\n/* harmony import */ var _Stage_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Stage/index.js */ \"./src/Stage/index.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Stage\", function() { return _Stage_index_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]; });\n\n/* harmony import */ var _Sprite_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Sprite/index.js */ \"./src/Sprite/index.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Sprite\", function() { return _Sprite_index_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"]; });\n\n\r\n\r\n\r\n\r\nconsole.log(\"Potato | version:0.9.1 | author:Roanne\");\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvaW5kZXguanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanM/YjYzNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgR2FtZSBmcm9tIFwiLi9HYW1lL2luZGV4LmpzXCI7XHJcbmltcG9ydCBTdGFnZSBmcm9tIFwiLi9TdGFnZS9pbmRleC5qc1wiO1xyXG5pbXBvcnQgU3ByaXRlIGZyb20gXCIuL1Nwcml0ZS9pbmRleC5qc1wiO1xyXG5cclxuY29uc29sZS5sb2coXCJQb3RhdG8gfCB2ZXJzaW9uOjAuOS4xIHwgYXV0aG9yOlJvYW5uZVwiKTtcclxuXHJcbmV4cG9ydCB7IEdhbWUsIFN0YWdlLCBTcHJpdGUgfSJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/index.js\n");

/***/ })

/******/ });